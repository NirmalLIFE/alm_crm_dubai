<ol class="flex font-semibold text-primary dark:text-white-dark">
    <li class="bg-[#ebedf2] ltr:rounded-l-md rtl:rounded-r-md dark:bg-[#1b2e4b]">
        <a routerLink="/dashboard"
            class="relative flex h-full items-center p-1.5 before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-b-transparent before:border-l-[#ebedf2] before:border-t-transparent hover:text-primary/70 ltr:pl-3 ltr:pr-2 ltr:before:-right-[15px] rtl:pl-2 rtl:pr-3 rtl:before:-left-[15px] rtl:before:rotate-180 dark:before:border-l-[#1b2e4b] dark:hover:text-white-dark/70">Home</a>
    </li>
    <li class="bg-[#ebedf2] dark:bg-[#1b2e4b]">
        <a
            class="relative flex h-full items-center bg-primary p-1.5 text-white-light before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-b-transparent before:border-l-primary before:border-t-transparent ltr:pl-6 ltr:pr-2 ltr:before:-right-[15px] rtl:pl-2 rtl:pr-6 rtl:before:-left-[15px] rtl:before:rotate-180">
            MIS</a>
    </li>
    <li class="bg-[#ebedf2] dark:bg-[#1b2e4b]">
        <a
            class="relative flex h-full items-center p-1.5 px-3 before:absolute before:inset-y-0 before:z-[1] before:m-auto before:h-0 before:w-0 before:border-[16px] before:border-l-[15px] before:border-r-0 before:border-b-transparent before:border-l-[#ebedf2] before:border-t-transparent hover:text-primary/70 ltr:pl-6 ltr:before:-right-[15px] rtl:pr-6 rtl:before:-left-[15px] rtl:before:rotate-180 dark:before:border-l-[#1b2e4b] dark:hover:text-white-dark/70">
            Customer Conversion Report</a>
    </li>
</ol>
<div class="panel mt-5 pb-0">
    <h5 class=" mb-5 ng-tns-c35-16 text-lg font-semibold dark:text-white-light "><b>New Customer Analysis Report</b>
    </h5>
    <div class="mb-5 grid flex-1 grid-cols-2 gap-2 lg:grid-cols-3 xl:grid-cols-4">
        <div>
            <label for="name" class="small_label_text m-0 dark:text-white-dark">Start Date</label>
            <input type="date" [(ngModel)]="start_date" class="form-input" ngxTippy="Start Date"
                placeholder="Start Date From" />
        </div>
        <div>
            <label for="name" class="small_label_text m-0 dark:text-white-dark">End Date</label>
            <input type="date" [(ngModel)]="end_date" class="form-input" ngxTippy="End Date"
                placeholder="End Date From" />
        </div>
        <div>
            <label for="name" class="small_label_text m-0 dark:text-white-dark" style="color: white;">.</label>
            <button type="button" (click)="getCustomerData()" class="btn btn-outline-primary">SEARCH</button>
        </div>
    </div>
    <div *ngIf="load_flag" style="text-align: center">
        <span
            class="m-auto mb-10 inline-block h-14 w-14 animate-[spin_3s_linear_infinite] rounded-full border-8 border-b-success border-l-primary border-r-warning border-t-danger align-middle"></span>
    </div>
    <div *ngIf="!load_flag">
        <div class="mb-5 grid flex-1 grid-cols-2 gap-2 lg:grid-cols-3 xl:grid-cols-4" style="margin: 0"
            *ngIf="totalcustomer_openjobcard != 0 || totalexisting_openjobcard != 0">
            <div class="col-span-2">
                <div class="table-wrapper-scroll-y my-custom-scrollbar" *ngIf="totalcustomer_openjobcard != 0">
                    <table class="table table-striped table-bordered" style="margin-bottom: 0 !important">
                        <tbody style="font-size: 14px">
                            <tr style="background-color: #eee">
                                <td style="text-align: center; padding: 0.5%" colspan="2">
                                    <b>Monthly Analysis - New Customer</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%; width: 70%">
                                    Total Customer - Open Jobcard
                                </td>
                                <td style="padding: 1%; text-align: center; width: 30%;  cursor: pointer;"
                                    (click)="CustomerDetail('openJobcard')">
                                    <b> {{ openjobcard.length }}</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%">
                                    Total Converted Customers - Invoiced
                                </td>
                                <td style="padding: 1%; text-align: center;  cursor: pointer;"
                                    (click)="CustomerDetail('totalcustconvert')">
                                    <b> {{ totalcustomer_converted }}</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%">
                                    Total Customers Via Inbound Call - Open Job card
                                </td>
                                <td style="padding: 1%; text-align: center;  cursor: pointer;"
                                    (click)="CustomerDetail('totalcustconvertinbound')">
                                    <b> {{ totalcustomer_inbound }}</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%">
                                    Total Converted Customers Via Inbound Call - Invoiced
                                </td>
                                <td style="padding: 1%; text-align: center;  cursor: pointer;"
                                    (click)="CustomerDetail('custconvertinv')">
                                    <b> {{ totalconverted_inbound }}</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%">
                                    Total Marketing Customers Via Inbound Call - Open Jobcard
                                </td>
                                <td style="padding: 1%; text-align: center;  cursor: pointer;"
                                    (click)="CustomerDetail('markcustopenjc')">
                                    <b> {{ totalmarketing_customer }}</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%">
                                    Total Marketing Converted Customers Via Inbound Call -
                                    Invoiced
                                </td>
                                <td style="padding: 1%; text-align: center;  cursor: pointer;"
                                    (click)="CustomerDetail('markcnvtcust')">
                                    <b> {{ totalmarketing_converted }}</b>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- <div *ngIf="totalcustomer_openjobcard == 0">
                    <p class="no-data-message">Nothing To Show Here</p>
                </div> -->
                <br />
                <div class="table-wrapper-scroll-y my-custom-scrollbar" *ngIf="totalexisting_openjobcard != 0">
                    <table class="table table-striped table-bordered" style="margin-bottom: 0 !important">
                        <tbody style="font-size: 14px">
                            <tr style="background-color: #eee">
                                <td style="text-align: center; padding: 0.5%" colspan="2">
                                    <b>Monthly Analysis - Existing Customer</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%; width: 70%">
                                    Total Existing Customers - Opened Jobcard
                                </td>
                                <td style="padding: 1%; text-align: center; width: 30%;  cursor: pointer;"
                                    (click)="CustomerDetail('existcustopnjc')">
                                    <b>{{ totalexisting_openjobcard }}</b>
                                </td>
                            </tr>
                            <tr style="background-color: #fff">
                                <td style="padding: 1%">
                                    Total Existing Customers - Invoiced
                                </td>
                                <td style="padding: 1%; text-align: center;  cursor: pointer;"
                                    (click)="CustomerDetail('existcustinv')">
                                    <b>{{ totalexisting_invoiced }}</b>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- <div *ngIf="totalexisting_openjobcard == 0">
                    <p class="no-data-message">Nothing To Show Here</p>
                </div> -->
            </div>
            <div class="col-span-2">
                <div *ngIf="totalcustomer_openjobcard != 0">
                    <!-- <nb-card style="border: white; margin-bottom: 0">
                        <nb-card-header style="text-align: center; padding: 2px">Monthly New Customer
                            Analysis</nb-card-header>
                        <nb-card-body>
                            <ngx-customer-conversion-report-graph [chartData]="monthlyGraph"
                                *ngIf="monthlyGraph.length > 0">
                            </ngx-customer-conversion-report-graph>
                        </nb-card-body>
                    </nb-card> -->
                    <div class="ng-tns-c35-16 mb-5 flex items-start justify-between" style="place-content: center;">
                        <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">Monthly New Customer
                            Analysis</h5>
                    </div>
                    <hr class="my-2 dark:border-[#191e3a]" style="border: 1px solid #eee" />
                    <!-- <apx-chart [series]="pieChart.series" [chart]="pieChart.chart" [plotOptions]="pieChart.plotOptions"
                        [labels]="pieChart.labels" [legend]="pieChart.legend" [colors]="pieChart.colors"
                        [responsive]="pieChart.responsive"></apx-chart> -->
                    <apx-chart [series]="pieChart.series" [chart]="pieChart.chart" [labels]="pieChart.labels"
                        [colors]="pieChart.colors" [responsive]="pieChart.responsive" [stroke]="pieChart.stroke"
                        [legend]="pieChart.legend" class="rounded-lg bg-white dark:bg-black"></apx-chart>
                </div>
                <div *ngIf="totalcustomer_openjobcard == 0">
                    <p class="no-data-message">Nothing To Show Here</p>
                </div>
            </div>
        </div>
        <!-- <div class="row" style="margin: 0" *ngIf="totalcustomer_openjobcard == 0 && totalexisting_openjobcard == 0">
            <div class="col-md-12">
                <p class="no-data-message">Nothing To Show Here</p>
            </div>
        </div> -->
    </div>
    <div class="mb-1 mt-3 grid flex-1 grid-cols-2 gap-2 lg:grid-cols-1 xl:grid-cols-1">
        <div class="ng-tns-c35-16 mb-5 flex items-start justify-between" style="place-content: center;">
            <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">Yearly New Customer Analysis</h5>
        </div>
        <hr class="my-2 dark:border-[#191e3a]" style="border: 1px solid #eee" />
        <div *ngIf="load_flag_2" style="text-align: center">
            <span
                class="m-auto mb-10 inline-block h-14 w-14 animate-[spin_3s_linear_infinite] rounded-full border-8 border-b-success border-l-primary border-r-warning border-t-danger align-middle"></span>
        </div>
        <div *ngIf="!load_flag_2">
            <apx-chart [series]="columnChart.series" [chart]="columnChart.chart" [colors]="columnChart.colors"
                [dataLabels]="columnChart.dataLabels" [stroke]="columnChart.stroke"
                [plotOptions]="columnChart.plotOptions" [grid]="columnChart.grid" [xaxis]="columnChart.xaxis"
                [yaxis]="columnChart.yaxis" [tooltip]="columnChart.tooltip" class="rounded-lg bg-white dark:bg-black">
            </apx-chart>
        </div>
    </div>
</div>