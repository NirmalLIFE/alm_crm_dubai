<div class="flex h-full">
    <span class="badge bg-dark m-1 rounded-full" style="cursor: pointer"
        [ngStyle]="{ opacity: selectedFollowUp === 'zero' ? '100%' : '70%' }" (click)="filterLabels(0,'zero')">All
        Customers
    </span>
    <span class="badge bg-warning m-1 rounded-full" style="cursor: pointer"
        [ngStyle]="{ opacity: selectedFollowUp === 'two' ? '100%' : '70%'  }" (click)="filterLabels(2, 'two')">Active
        Customers
        ({{ chatCounts.activeCust }})
    </span>
    <span class="badge bg-info m-1 rounded-full" style="cursor: pointer"
        [ngStyle]="{ opacity: selectedFollowUp === 'three' ? '100%' : '70%'  }"
        (click)="filterLabels(3, 'three')">Appointment
        Customers
        ({{ chatCounts.appointmentCust }})
    </span>
    <span class="badge bg-danger m-1 rounded-full" style="cursor: pointer"
        [ngStyle]="{ opacity: selectedFollowUp === 'four' ? '100%' : '70%'  }"
        (click)="filterLabels(4, 'four')">Quotation
        Customers
        ({{ chatCounts.quotationCust }})
    </span>
    <span class="badge bg-dark m-1 rounded-full" style="cursor: pointer"
        [ngStyle]="{ opacity: selectedFollowUp === 'five' ? '100%' : '70%'  }"
        (click)="filterLabels(5, 'five')">Irrelevant
        Customers
        ({{ chatCounts.irrelaventCust }})
    </span>
    <span class="badge bg-success m-1" style="cursor: pointer"
        [ngStyle]="{ opacity: selectedFollowUp === 'one' ? '100%' : '70%'  }" (click)="filterLabels(1, 'one')">Potential
        Customers
        ({{ chatCounts.potentialCust }})
    </span>
</div>
<div class="flex h-full gap-2" style="align-items: center;"
    *ngIf="inboundFollowUpTimes && inboundFollowUpTimes.length>0">
    <label class="mt-1">Inbound Follow Up ----</label>
    <div class="flex h-full gap-2">
        <span [ngClass]="
        selectedFollowUp === 'first' 
            ? (hasExceededFollowUps(followUpCounts.firstFollowUp) ? 'badge bg-danger' : 'badge bg-success') 
            : (hasExceededFollowUps(followUpCounts.firstFollowUp) ? 'badge badge-outline-danger animate-outline' : 'badge badge-outline-success')
    " style="cursor: pointer"
            (click)="isFollowUpSelected = true;selectedFollowUp = 'first'; this.allCustomersList=this.followUpCounts.firstFollowUp">1st
            Follow Up
            ({{
            followUpCounts.firstFollowUp.length
            }})</span>
        <span [ngClass]="
        selectedFollowUp === 'second' 
            ? (hasExceededFollowUps(followUpCounts.secondFollowUp) ? 'badge bg-danger' : 'badge bg-success') 
            : (hasExceededFollowUps(followUpCounts.secondFollowUp) ? 'badge badge-outline-danger animate-outline' : 'badge badge-outline-success')
    " style="cursor: pointer"
            (click)="isFollowUpSelected = true;selectedFollowUp = 'second';this.allCustomersList=this.followUpCounts.secondFollowUp">2nd
            Follow Up
            ({{
            followUpCounts.secondFollowUp.length
            }})</span>
        <span [ngClass]="
        selectedFollowUp === 'third' 
            ? (hasExceededFollowUps(followUpCounts.thirdFollowUp) ? 'badge bg-danger' : 'badge bg-success') 
            : (hasExceededFollowUps(followUpCounts.thirdFollowUp) ? 'badge badge-outline-danger animate-outline' : 'badge badge-outline-success')
    " style="cursor: pointer"
            (click)="isFollowUpSelected = true;selectedFollowUp = 'third';this.allCustomersList=this.followUpCounts.thirdFollowUp">3rd
            Follow
            Up ({{
            followUpCounts.thirdFollowUp.length
            }})</span>

        <span [ngClass]="{
            'badge': true, 
            'bg-warning': selectedFollowUp === 'pend', 
            'badge-outline-warning': selectedFollowUp !== 'pend', 
            'm-1': true
        }" style="cursor: pointer"
            (click)="isFollowUpSelected = true;selectedFollowUp = 'pend';this.allCustomersList=this.followUpCounts.pendingReply">
            Pending 3rd Follow Up Reply({{followUpCounts.pendingReply.length}})</span>
        <span [ngClass]="{
                'badge': true, 
                'bg-dark': selectedFollowUp === 'temp', 
                'badge-outline-dark': selectedFollowUp !== 'temp', 
                'm-1': true
            }" style="cursor: pointer"
            (click)="isFollowUpSelected = true;selectedFollowUp = 'temp';this.allCustomersList=this.followUpCounts.tempLost">Temporary
            Lost ({{followUpCounts.tempLost.length}})</span>
        <!-- <span
            [ngClass]="hasExceededFollowUps(followUpCounts.fourthFollowUp) ? 'badge badge-outline-danger' : 'badge badge-outline-success'"
            style="cursor: pointer" (click)="isFollowUpSelected = true;this.allCustomersList=this. followUpCounts.fourthFollowUp">4th Follow Up
            ({{
            followUpCounts.fourthFollowUp.length
            }})</span>
        <span
            [ngClass]="hasExceededFollowUps(followUpCounts.fifthFollowUp) ? 'badge badge-outline-danger' : 'badge badge-outline-success'"
            style="cursor: pointer" (click)="isFollowUpSelected = true;this.allCustomersList=this.followUpCounts.fifthFollowUp">5th Follow Up ({{
            followUpCounts.fifthFollowUp.length
            }})</span> -->
    </div>
</div>
<!-- <div *ngIf="outboundFollowUpTimes && outboundFollowUpTimes.length>0">
    <label>Outbound Follow Up</label>
    <div class="flex h-full">
        <span class="badge badge-outline-success m-1" style="cursor: pointer"
            (click)="isFollowUpSelected = true;this.allCustomersList=this.potentialList.awaiting30m">1st Follow Up ({{
            potentialList.awaiting30m.length
            }})</span>
    </div>
</div> -->
<!-- <div class="flex h-full">
    <span class="badge badge-outline-success m-1" style="cursor: pointer"
        (click)="fetchCustomerData('-30 minutes', '-0 minutes')">30Min & less ({{ potentialList.awaiting30m }})
    </span>
    <span class="badge badge-outline-info m-1" style="cursor: pointer"
        (click)="fetchCustomerData('-1 hour','-30 minutes')">30Min to 1Hour ({{ potentialList.awaiting1h }})</span>
    <span class="badge badge-outline-warning m-1" style="cursor: pointer"
        (click)="fetchCustomerData('-3 hours' ,'-1 hour')">1Hour to 3Hour ({{ potentialList.awaiting3h }})</span>
    <span class="badge badge-outline-secondary m-1" style="cursor: pointer"
        (click)="fetchCustomerData('-1 day','-3 hours')">3Hour to 1Day ({{ potentialList.awiating1d }})</span>
    <span class="badge badge-outline-danger m-1" style="cursor: pointer"
        (click)="fetchCustomerData('-3 days','-1 day')">1Day to 3Day ({{ potentialList.awaiting3d }})</span>
    <span class="badge badge-outline-dark m-1" style="cursor: pointer" (click)="fetchTempLostCustomerData()">Temporary
        Lost ({{chatCounts.potentialCust - potentialList.awaitingTempLost }})</span>
</div> -->
<!-- <button class="btn btn-danger mr-3" (click)="sendCampaign()">SEND</button> -->
<div>
    <div class="relative flex h-full sm:h-[calc(100vh_-_150px)] sm:min-h-0"
        [ngClass]="{ 'min-h-[999px]': isShowChatMenu }">
        <div class="panel absolute z-10 hidden h-full w-full max-w-xs flex-none flex-col space-y-4 overflow-hidden p-4 xl:relative xl:flex"
            [ngClass]="{ '!flex !overflow-y-auto': isShowChatMenu }" style="border-radius: 0 !important">
            <div class="relative">
                <input type="text" class="peer form-input ltr:pr-9 rtl:pl-9"
                    placeholder="Search by Name or Phone Number..." name="searchUser" (keyup)="searchCustomers()"
                    [(ngModel)]="searchText" />
                <div class="absolute top-1/2 -translate-y-1/2 peer-focus:text-primary ltr:right-2 rtl:left-2">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="11.5" cy="11.5" r="9.5" stroke="currentColor" stroke-width="1.5" opacity="0.5">
                        </circle>
                        <path d="M18.5 18.5L22 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
                        </path>
                    </svg>
                </div>
            </div>
            <div class="ml-2 flex items-center justify-between text-xs">
                <button type="button" class="relative hover:text-primary" (click)="getUnreadMessages(1)">
                    <span
                        class="absolute right-0 top-0 flex h-5 w-5 -translate-y-1/2 translate-x-1/2 transform items-center justify-center rounded-full bg-green-500 text-xs font-bold text-white"
                        style="margin-right: 5px">
                        {{ unreadCount }}
                    </span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                        class="mx-auto mb-1 h-5 w-5">
                        <path
                            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.5997 2.37562 15.1116 3.04346 16.4525C3.22094 16.8088 3.28001 17.2161 3.17712 17.6006L2.58151 19.8267C2.32295 20.793 3.20701 21.677 4.17335 21.4185L6.39939 20.8229C6.78393 20.72 7.19121 20.7791 7.54753 20.9565C8.88837 21.6244 10.4003 22 12 22Z"
                            stroke="currentColor" stroke-width="1.5" />
                        <path opacity="0.5" d="M8 10.5H16" stroke="currentColor" stroke-width="1.5"
                            stroke-linecap="round" />
                        <path opacity="0.5" d="M8 14H13.5" stroke="currentColor" stroke-width="1.5"
                            stroke-linecap="round" />
                    </svg>

                    <!-- <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                        class="mx-auto mb-1 h-5 w-5">
                        <path opacity="0.5" 
                            d="M13.0867 21.3877L13.7321 21.7697L13.0867 21.3877ZM13.6288 20.4718L12.9833 20.0898L13.6288 20.4718ZM10.3712 20.4718L9.72579 20.8539H9.72579L10.3712 20.4718ZM10.9133 21.3877L11.5587 21.0057L10.9133 21.3877ZM13.5 2.75C13.9142 2.75 14.25 2.41421 14.25 2C14.25 1.58579 13.9142 1.25 13.5 1.25V2.75ZM22.75 10.5C22.75 10.0858 22.4142 9.75 22 9.75C21.5858 9.75 21.25 10.0858 21.25 10.5H22.75ZM2.3806 15.9134L3.07351 15.6264V15.6264L2.3806 15.9134ZM7.78958 18.9915L7.77666 19.7413L7.78958 18.9915ZM5.08658 18.6194L4.79957 19.3123H4.79957L5.08658 18.6194ZM21.6194 15.9134L22.3123 16.2004V16.2004L21.6194 15.9134ZM16.2104 18.9915L16.1975 18.2416L16.2104 18.9915ZM18.9134 18.6194L19.2004 19.3123H19.2004L18.9134 18.6194ZM4.38751 2.7368L3.99563 2.09732V2.09732L4.38751 2.7368ZM2.7368 4.38751L2.09732 3.99563H2.09732L2.7368 4.38751ZM9.40279 19.2098L9.77986 18.5615L9.77986 18.5615L9.40279 19.2098ZM13.7321 21.7697L14.2742 20.8539L12.9833 20.0898L12.4412 21.0057L13.7321 21.7697ZM9.72579 20.8539L10.2679 21.7697L11.5587 21.0057L11.0166 20.0898L9.72579 20.8539ZM12.4412 21.0057C12.2485 21.3313 11.7515 21.3313 11.5587 21.0057L10.2679 21.7697C11.0415 23.0767 12.9585 23.0767 13.7321 21.7697L12.4412 21.0057ZM10.5 2.75H13.5V1.25H10.5V2.75ZM21.25 10.5V11.5H22.75V10.5H21.25ZM2.75 11.5V10.5H1.25V11.5H2.75ZM1.25 11.5C1.25 12.6546 1.24959 13.5581 1.29931 14.2868C1.3495 15.0223 1.45323 15.6344 1.68769 16.2004L3.07351 15.6264C2.92737 15.2736 2.84081 14.8438 2.79584 14.1847C2.75041 13.5189 2.75 12.6751 2.75 11.5H1.25ZM7.8025 18.2416C6.54706 18.2199 5.88923 18.1401 5.37359 17.9265L4.79957 19.3123C5.60454 19.6457 6.52138 19.7197 7.77666 19.7413L7.8025 18.2416ZM1.68769 16.2004C2.27128 17.6093 3.39066 18.7287 4.79957 19.3123L5.3736 17.9265C4.33223 17.4951 3.50486 16.6678 3.07351 15.6264L1.68769 16.2004ZM21.25 11.5C21.25 12.6751 21.2496 13.5189 21.2042 14.1847C21.1592 14.8438 21.0726 15.2736 20.9265 15.6264L22.3123 16.2004C22.5468 15.6344 22.6505 15.0223 22.7007 14.2868C22.7504 13.5581 22.75 12.6546 22.75 11.5H21.25ZM16.2233 19.7413C17.4786 19.7197 18.3955 19.6457 19.2004 19.3123L18.6264 17.9265C18.1108 18.1401 17.4529 18.2199 16.1975 18.2416L16.2233 19.7413ZM20.9265 15.6264C20.4951 16.6678 19.6678 17.4951 18.6264 17.9265L19.2004 19.3123C20.6093 18.7287 21.7287 17.6093 22.3123 16.2004L20.9265 15.6264ZM10.5 1.25C8.87781 1.25 7.6085 1.24921 6.59611 1.34547C5.57256 1.44279 4.73445 1.64457 3.99563 2.09732L4.77938 3.37628C5.24291 3.09223 5.82434 2.92561 6.73809 2.83873C7.663 2.75079 8.84876 2.75 10.5 2.75V1.25ZM2.75 10.5C2.75 8.84876 2.75079 7.663 2.83873 6.73809C2.92561 5.82434 3.09223 5.24291 3.37628 4.77938L2.09732 3.99563C1.64457 4.73445 1.44279 5.57256 1.34547 6.59611C1.24921 7.6085 1.25 8.87781 1.25 10.5H2.75ZM3.99563 2.09732C3.22194 2.57144 2.57144 3.22194 2.09732 3.99563L3.37628 4.77938C3.72672 4.20752 4.20752 3.72672 4.77938 3.37628L3.99563 2.09732ZM11.0166 20.0898C10.8136 19.7468 10.6354 19.4441 10.4621 19.2063C10.2795 18.9559 10.0702 18.7304 9.77986 18.5615L9.02572 19.8582C9.07313 19.8857 9.13772 19.936 9.24985 20.0898C9.37122 20.2564 9.50835 20.4865 9.72579 20.8539L11.0166 20.0898ZM7.77666 19.7413C8.21575 19.7489 8.49387 19.7545 8.70588 19.7779C8.90399 19.7999 8.98078 19.832 9.02572 19.8582L9.77986 18.5615C9.4871 18.3912 9.18246 18.3215 8.87097 18.287C8.57339 18.2541 8.21375 18.2487 7.8025 18.2416L7.77666 19.7413ZM14.2742 20.8539C14.4916 20.4865 14.6287 20.2564 14.7501 20.0898C14.8622 19.936 14.9268 19.8857 14.9742 19.8582L14.2201 18.5615C13.9298 18.7304 13.7204 18.9559 13.5379 19.2063C13.3646 19.4441 13.1864 19.7468 12.9833 20.0898L14.2742 20.8539ZM16.1975 18.2416C15.7862 18.2487 15.4266 18.2541 15.129 18.287C14.8175 18.3215 14.5129 18.3912 14.2201 18.5615L14.9742 19.8582C15.0192 19.832 15.096 19.7999 15.2941 19.7779C15.5061 19.7545 15.7842 19.7489 16.2233 19.7413L16.1975 18.2416Z"
                            fill="currentColor" />
                        <circle cx="19" cy="5" r="3" stroke="currentColor" stroke-width="1.5" />
                    </svg> -->
                    Chats
                </button>
                <button type="button" class="relative hover:text-primary" (click)="newchat?.open()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                        class="mx-auto mb-1 h-5 w-5">
                        <circle cx="10" cy="6" r="4" stroke="currentColor" stroke-width="1.5" />
                        <path
                            d="M18 17.5C18 19.9853 18 22 10 22C2 22 2 19.9853 2 17.5C2 15.0147 5.58172 13 10 13C14.4183 13 18 15.0147 18 17.5Z"
                            stroke="currentColor" stroke-width="1.5" />
                        <path d="M21 10H19M19 10H17M19 10L19 8M19 10L19 12" stroke="currentColor" stroke-width="1.5"
                            stroke-linecap="round" />
                    </svg>
                    New
                </button>
                <button type="button" class="relative hover:text-primary" (click)="refresh()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                        class="mx-auto mb-1 h-5 w-5">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" />
                        <path
                            d="M15.9775 8.71452L15.5355 8.2621C13.5829 6.26318 10.4171 6.26318 8.46447 8.2621C6.51184 10.261 6.51184 13.5019 8.46447 15.5008C10.4171 17.4997 13.5829 17.4997 15.5355 15.5008C16.671 14.3384 17.1462 12.7559 16.9611 11.242M15.9775 8.71452H13.3258M15.9775 8.71452V6"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Refresh
                </button>
            </div>
            <div class="h-px w-full border-b border-[#e0e6ed] dark:border-[#1b2e4b]"></div>
            <div class="!mt-0 flex-grow">
                <ng-scrollbar #customersScrollable (scroll)="onscroll($event)"
                    class="chat-users relative h-full min-h-[100px] space-y-0.5 ltr:-mr-3 rtl:-ml-3 sm:h-[calc(100vh_-_357px)]"
                    appearance="compact">
                    <ng-container *ngFor="let person of allCustomersList">
                        <button title="+{{person.wb_cus_mobile}}-{{ person.alm_wb_msg_content }}" type="button"
                            class="flex w-full items-center justify-between p-2 hover:bg-gray-100 hover:text-primary dark:hover:bg-[#050b14] dark:hover:text-primary"
                            [ngClass]="{
                                'bg-gray-100 text-primary dark:bg-[#050b14] dark:text-primary': currentUser && currentUser.wb_cus_id == person.wb_cus_id
                            }" (click)="selectUser(person)">
                            <div class="flex-1">
                                <div class="flex items-center">
                                    <div class="relative flex-shrink-0">
                                        <img *ngIf="person.wb_cus_profile_pic == ''"
                                            [src]="'./assets/images/person_icon.png'"
                                            class="h-12 w-12 rounded-full object-cover border_type_{{ person.wb_cus_category }}" />
                                        <img *ngIf="person.wb_cus_profile_pic != ''"
                                            [src]="'./assets/images/person_icon.png'"
                                            class="h-12 w-12 rounded-full object-cover" />
                                        <ng-container *ngIf="person.active">
                                            <div class="absolute bottom-0 ltr:right-0 rtl:left-0">
                                                <div class="h-4 w-4 rounded-full bg-success"></div>
                                            </div>
                                        </ng-container>
                                    </div>
                                    <div class="ml-3 w-full ltr:text-left rtl:text-right">
                                        <p class="text-s font-semibold">{{ person.wb_cus_name }}</p>
                                        <p class="max-w-[140px] truncate text-xs text-white-dark">*******{{
                                            person.wb_cus_mobile | slice : -5}}</p>
                                        <p class="max-w-[120px] truncate text-xs font-semibold text-dark"
                                            *ngIf="person.alm_wb_msg_status != '4'">
                                            {{ person.alm_wb_msg_content }}
                                        </p>
                                        <p class="max-w-[120px] truncate text-xs font-semibold text-danger"
                                            *ngIf="person.alm_wb_msg_status == '4'">
                                            Message Sending Failed
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="whitespace-nowrap text-xs font-semibold">
                                <p class="mb-2">{{ person.time }}</p>
                                <span class="badge rounded-full bg-success"
                                    *ngIf="person.message_status_2_count > 0">1+</span>
                            </div>
                        </button>
                    </ng-container>
                    <ng-container *ngIf="isLoading==true">
                        <div style="text-align: center; font-weight: 400; font-size: 16px; margin-top: 20px;">
                            Loading....
                        </div>
                    </ng-container>

                </ng-scrollbar>
            </div>
        </div>
        <div class="absolute z-[5] hidden h-full w-full rounded-md bg-black/60"
            [ngClass]="{ '!block xl:!hidden': isShowChatMenu }" (click)="isShowChatMenu = !isShowChatMenu"></div>
        <div class="panel flex-1 p-0">
            <ng-container *ngIf="!isShowUserChat">
                <div class="relative flex h-full items-center justify-center p-4">
                    <button type="button" class="absolute top-4 hover:text-primary ltr:left-4 rtl:right-4 xl:hidden"
                        (click)="isShowChatMenu = !isShowChatMenu">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                            class="h-6 w-6">
                            <path d="M20 7L4 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                            <path opacity="0.5" d="M20 12L4 12" stroke="currentColor" stroke-width="1.5"
                                stroke-linecap="round" />
                            <path d="M20 17L4 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                    </button>

                    <div class="flex flex-col items-center justify-center py-8">
                        <div
                            class="mb-8 h-[calc(100vh_-_320px)] min-h-[120px] w-[280px] text-white dark:text-[#0e1726] md:w-[430px]">
                            <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" class="h-full w-full"
                                viewBox="0 0 891.29496 745.19434" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <ellipse cx="418.64354" cy="727.19434" rx="352" ry="18"
                                    class="fill-[#e6e6e6] dark:fill-[#888ea8]" />
                                <path
                                    d="M778.64963,250.35008h-3.99878V140.80476a63.40187,63.40187,0,0,0-63.4018-63.40193H479.16232a63.40188,63.40188,0,0,0-63.402,63.4017v600.9744a63.40189,63.40189,0,0,0,63.4018,63.40192H711.24875a63.40187,63.40187,0,0,0,63.402-63.40168V328.32632h3.99878Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#3f3d56" />
                                <path
                                    d="M761.156,141.24713v600.09a47.35072,47.35072,0,0,1-47.35,47.35h-233.2a47.35084,47.35084,0,0,1-47.35-47.35v-600.09a47.3509,47.3509,0,0,1,47.35-47.35h28.29a22.50659,22.50659,0,0,0,20.83,30.99h132.96a22.50672,22.50672,0,0,0,20.83-30.99h30.29A47.35088,47.35088,0,0,1,761.156,141.24713Z"
                                    transform="translate(-154.35252 -77.40283)" fill="currentColor" />
                                <path
                                    d="M686.03027,400.0032q-2.32543,1.215-4.73047,2.3-2.18994.99-4.4497,1.86c-.5503.21-1.10987.42-1.66992.63a89.52811,89.52811,0,0,1-13.6001,3.75q-3.43506.675-6.96,1.06-2.90991.33-5.87989.47c-1.41015.07-2.82031.1-4.24023.1a89.84124,89.84124,0,0,1-16.75977-1.57c-1.44043-.26-2.85009-.57-4.26025-.91a88.77786,88.77786,0,0,1-19.66992-7.26c-.56006-.28-1.12012-.58-1.68018-.87-.83008-.44-1.63965-.9-2.4497-1.38.38964-.54.81005-1.07,1.23974-1.59a53.03414,53.03414,0,0,1,78.87012-4.1,54.27663,54.27663,0,0,1,5.06006,5.86C685.25977,398.89316,685.6499,399.44321,686.03027,400.0032Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#6c63ff" />
                                <circle cx="492.14325" cy="234.76352" r="43.90974" fill="#2f2e41" />
                                <circle cx="642.49883" cy="327.46205" r="32.68086"
                                    transform="translate(-232.6876 270.90663) rotate(-28.66315)" fill="#a0616a" />
                                <path
                                    d="M676.8388,306.90589a44.44844,44.44844,0,0,1-25.402,7.85033,27.23846,27.23846,0,0,0,10.796,4.44154,89.62764,89.62764,0,0,1-36.61.20571,23.69448,23.69448,0,0,1-7.66395-2.63224,9.699,9.699,0,0,1-4.73055-6.3266c-.80322-4.58859,2.77227-8.75743,6.488-11.567a47.85811,47.85811,0,0,1,40.21662-8.03639c4.49246,1.16124,8.99288,3.12327,11.91085,6.731s3.78232,9.16981,1.00224,12.88488Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#2f2e41" />
                                <path
                                    d="M644.5,230.17319a89.98675,89.98675,0,0,0-46.83984,166.83l.58007.34q.72.43506,1.43995.84c.81005.48,1.61962.94,2.4497,1.38.56006.29,1.12012.59,1.68018.87a88.77786,88.77786,0,0,0,19.66992,7.26c1.41016.34,2.81982.65,4.26025.91a89.84124,89.84124,0,0,0,16.75977,1.57c1.41992,0,2.83008-.03,4.24023-.1q2.97-.135,5.87989-.47,3.52513-.39,6.96-1.06a89.52811,89.52811,0,0,0,13.6001-3.75c.56005-.21,1.11962-.42,1.66992-.63q2.26464-.87,4.4497-1.86,2.40015-1.08,4.73047-2.3a90.7919,90.7919,0,0,0,37.03955-35.97c.04-.07995.09034-.16.13038-.24a89.30592,89.30592,0,0,0,9.6499-26.41,90.051,90.051,0,0,0-88.3501-107.21Zm77.06006,132.45c-.08008.14-.1499.28-.23.41a88.17195,88.17195,0,0,1-36.48,35.32q-2.29542,1.2-4.66992,2.25c-1.31006.59-2.64991,1.15-4,1.67-.57032.22-1.14991.44-1.73.64a85.72126,85.72126,0,0,1-11.73,3.36,84.69473,84.69473,0,0,1-8.95019,1.41c-1.8501.2-3.73.34-5.62012.41-1.21.05-2.42969.08-3.6499.08a86.762,86.762,0,0,1-16.21973-1.51,85.62478,85.62478,0,0,1-9.63037-2.36,88.46592,88.46592,0,0,1-13.98974-5.67c-.52-.27-1.04-.54-1.5503-.82-.73-.39-1.46972-.79-2.18994-1.22-.54-.3-1.08008-.62-1.60986-.94-.31006-.18-.62012-.37-.93018-.56a88.06851,88.06851,0,1,1,123.18018-32.47Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#3f3d56" />
                                <path
                                    d="M624.2595,268.86254c-.47244-4.968-6.55849-8.02647-11.3179-6.52583s-7.88411,6.2929-8.82863,11.19308a16.0571,16.0571,0,0,0,2.16528,12.12236c2.40572,3.46228,6.82664,5.623,10.95,4.74406,4.70707-1.00334,7.96817-5.59956,8.90127-10.32105s.00667-9.58929-.91854-14.31234Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#2f2e41" />
                                <path
                                    d="M691.24187,275.95964c-.47245-4.968-6.5585-8.02646-11.3179-6.52582s-7.88412,6.29289-8.82864,11.19307a16.05711,16.05711,0,0,0,2.16529,12.12236c2.40571,3.46228,6.82663,5.623,10.95,4.74406,4.70707-1.00334,7.96817-5.59955,8.90127-10.32105s.00667-9.58929-.91853-14.31234Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#2f2e41" />
                                <path
                                    d="M488.93638,356.14169a4.47525,4.47525,0,0,1-3.30664-1.46436L436.00767,300.544a6.02039,6.02039,0,0,0-4.42627-1.94727H169.3618a15.02615,15.02615,0,0,1-15.00928-15.00927V189.025a15.02615,15.02615,0,0,1,15.00928-15.00928H509.087A15.02615,15.02615,0,0,1,524.0963,189.025v94.5625A15.02615,15.02615,0,0,1,509.087,298.59676h-9.63135a6.01157,6.01157,0,0,0-6.00464,6.00489v47.0332a4.474,4.474,0,0,1-2.87011,4.1958A4.52563,4.52563,0,0,1,488.93638,356.14169Z"
                                    transform="translate(-154.35252 -77.40283)" fill="currentColor" />
                                <path
                                    d="M488.93638,356.14169a4.47525,4.47525,0,0,1-3.30664-1.46436L436.00767,300.544a6.02039,6.02039,0,0,0-4.42627-1.94727H169.3618a15.02615,15.02615,0,0,1-15.00928-15.00927V189.025a15.02615,15.02615,0,0,1,15.00928-15.00928H509.087A15.02615,15.02615,0,0,1,524.0963,189.025v94.5625A15.02615,15.02615,0,0,1,509.087,298.59676h-9.63135a6.01157,6.01157,0,0,0-6.00464,6.00489v47.0332a4.474,4.474,0,0,1-2.87011,4.1958A4.52563,4.52563,0,0,1,488.93638,356.14169ZM169.3618,176.01571A13.024,13.024,0,0,0,156.35252,189.025v94.5625a13.024,13.024,0,0,0,13.00928,13.00927H431.5814a8.02436,8.02436,0,0,1,5.90039,2.59571l49.62208,54.1333a2.50253,2.50253,0,0,0,4.34716-1.69092v-47.0332a8.0137,8.0137,0,0,1,8.00464-8.00489H509.087a13.024,13.024,0,0,0,13.00928-13.00927V189.025A13.024,13.024,0,0,0,509.087,176.01571Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#3f3d56" />
                                <circle cx="36.81601" cy="125.19345" r="13.13371" fill="#6c63ff" />
                                <path
                                    d="M493.76439,275.26947H184.68447a7.00465,7.00465,0,1,1,0-14.00929H493.76439a7.00465,7.00465,0,0,1,0,14.00929Z"
                                    transform="translate(-154.35252 -77.40283)"
                                    class="fill-[#e6e6e6] dark:fill-[#888ea8]" />
                                <path
                                    d="M393.07263,245.49973H184.68447a7.00465,7.00465,0,1,1,0-14.00929H393.07263a7.00464,7.00464,0,0,1,0,14.00929Z"
                                    transform="translate(-154.35252 -77.40283)"
                                    class="fill-[#e6e6e6] dark:fill-[#888ea8]" />
                                <path
                                    d="M709.41908,676.83065a4.474,4.474,0,0,1-2.87011-4.1958v-47.0332a6.01157,6.01157,0,0,0-6.00464-6.00489H690.913a15.02615,15.02615,0,0,1-15.00928-15.00927V510.025A15.02615,15.02615,0,0,1,690.913,495.01571H1030.6382a15.02615,15.02615,0,0,1,15.00928,15.00928v94.5625a15.02615,15.02615,0,0,1-15.00928,15.00927H768.4186a6.02039,6.02039,0,0,0-4.42627,1.94727l-49.62207,54.1333a4.47525,4.47525,0,0,1-3.30664,1.46436A4.52563,4.52563,0,0,1,709.41908,676.83065Z"
                                    transform="translate(-154.35252 -77.40283)" fill="currentColor" />
                                <path
                                    d="M709.41908,676.83065a4.474,4.474,0,0,1-2.87011-4.1958v-47.0332a6.01157,6.01157,0,0,0-6.00464-6.00489H690.913a15.02615,15.02615,0,0,1-15.00928-15.00927V510.025A15.02615,15.02615,0,0,1,690.913,495.01571H1030.6382a15.02615,15.02615,0,0,1,15.00928,15.00928v94.5625a15.02615,15.02615,0,0,1-15.00928,15.00927H768.4186a6.02039,6.02039,0,0,0-4.42627,1.94727l-49.62207,54.1333a4.47525,4.47525,0,0,1-3.30664,1.46436A4.52563,4.52563,0,0,1,709.41908,676.83065ZM690.913,497.01571A13.024,13.024,0,0,0,677.9037,510.025v94.5625A13.024,13.024,0,0,0,690.913,617.59676h9.63135a8.0137,8.0137,0,0,1,8.00464,8.00489v47.0332a2.50253,2.50253,0,0,0,4.34716,1.69092l49.62208-54.1333a8.02436,8.02436,0,0,1,5.90039-2.59571h262.2196a13.024,13.024,0,0,0,13.00928-13.00927V510.025a13.024,13.024,0,0,0-13.00928-13.00928Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#3f3d56" />
                                <path
                                    d="M603.53027,706.11319a89.06853,89.06853,0,0,1-93.65039,1.49,54.12885,54.12885,0,0,1,9.40039-12.65,53.43288,53.43288,0,0,1,83.90967,10.56994C603.2998,705.71316,603.41992,705.91318,603.53027,706.11319Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#6c63ff" />
                                <circle cx="398.44256" cy="536.68841" r="44.20157" fill="#2f2e41" />
                                <circle cx="556.81859" cy="629.4886" r="32.89806"
                                    transform="translate(-416.96496 738.72884) rotate(-61.33685)" fill="#ffb8b8" />
                                <path
                                    d="M522.25039,608.79582a44.74387,44.74387,0,0,0,25.57085,7.9025,27.41946,27.41946,0,0,1-10.8677,4.47107,90.22316,90.22316,0,0,0,36.85334.20707,23.852,23.852,0,0,0,7.71488-2.64973,9.76352,9.76352,0,0,0,4.762-6.36865c.80855-4.61909-2.7907-8.81563-6.53113-11.64387a48.17616,48.17616,0,0,0-40.4839-8.08981c-4.52231,1.169-9.05265,3.144-11.99,6.77579s-3.80746,9.23076-1.0089,12.97052Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#2f2e41" />
                                <path
                                    d="M555.5,721.17319a89.97205,89.97205,0,1,1,48.5708-14.21875A89.87958,89.87958,0,0,1,555.5,721.17319Zm0-178a88.00832,88.00832,0,1,0,88,88A88.09957,88.09957,0,0,0,555.5,543.17319Z"
                                    transform="translate(-154.35252 -77.40283)" fill="#3f3d56" />
                                <circle cx="563.81601" cy="445.19345" r="13.13371" fill="#6c63ff" />
                                <path
                                    d="M1020.76439,595.26947H711.68447a7.00465,7.00465,0,1,1,0-14.00929h309.07992a7.00464,7.00464,0,0,1,0,14.00929Z"
                                    transform="translate(-154.35252 -77.40283)"
                                    class="fill-[#e6e6e6] dark:fill-[#888ea8]" />
                                <path
                                    d="M920.07263,565.49973H711.68447a7.00465,7.00465,0,1,1,0-14.00929H920.07263a7.00465,7.00465,0,0,1,0,14.00929Z"
                                    transform="translate(-154.35252 -77.40283)"
                                    class="fill-[#e6e6e6] dark:fill-[#888ea8]" />
                                <ellipse cx="554.64354" cy="605.66091" rx="24.50394" ry="2.71961"
                                    class="fill-[#e6e6e6] dark:fill-[#888ea8]" />
                                <ellipse cx="335.64354" cy="285.66091" rx="24.50394" ry="2.71961"
                                    class="fill-[#e6e6e6] dark:fill-[#888ea8]" />
                            </svg>
                        </div>
                        <p
                            class="mx-auto flex max-w-[190px] justify-center rounded-md bg-white-dark/20 p-2 font-semibold">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ltr:mr-2 rtl:ml-2">
                                <path
                                    d="M13.0867 21.3877L13.7321 21.7697L13.0867 21.3877ZM13.6288 20.4718L12.9833 20.0898L13.6288 20.4718ZM10.3712 20.4718L9.72579 20.8539H9.72579L10.3712 20.4718ZM10.9133 21.3877L11.5587 21.0057L10.9133 21.3877ZM2.3806 15.9134L3.07351 15.6264V15.6264L2.3806 15.9134ZM7.78958 18.9915L7.77666 19.7413L7.78958 18.9915ZM5.08658 18.6194L4.79957 19.3123H4.79957L5.08658 18.6194ZM21.6194 15.9134L22.3123 16.2004V16.2004L21.6194 15.9134ZM16.2104 18.9915L16.1975 18.2416L16.2104 18.9915ZM18.9134 18.6194L19.2004 19.3123H19.2004L18.9134 18.6194ZM19.6125 2.7368L19.2206 3.37628L19.6125 2.7368ZM21.2632 4.38751L21.9027 3.99563V3.99563L21.2632 4.38751ZM4.38751 2.7368L3.99563 2.09732V2.09732L4.38751 2.7368ZM2.7368 4.38751L2.09732 3.99563H2.09732L2.7368 4.38751ZM9.40279 19.2098L9.77986 18.5615L9.77986 18.5615L9.40279 19.2098ZM13.7321 21.7697L14.2742 20.8539L12.9833 20.0898L12.4412 21.0057L13.7321 21.7697ZM9.72579 20.8539L10.2679 21.7697L11.5587 21.0057L11.0166 20.0898L9.72579 20.8539ZM12.4412 21.0057C12.2485 21.3313 11.7515 21.3313 11.5587 21.0057L10.2679 21.7697C11.0415 23.0767 12.9585 23.0767 13.7321 21.7697L12.4412 21.0057ZM10.5 2.75H13.5V1.25H10.5V2.75ZM21.25 10.5V11.5H22.75V10.5H21.25ZM2.75 11.5V10.5H1.25V11.5H2.75ZM1.25 11.5C1.25 12.6546 1.24959 13.5581 1.29931 14.2868C1.3495 15.0223 1.45323 15.6344 1.68769 16.2004L3.07351 15.6264C2.92737 15.2736 2.84081 14.8438 2.79584 14.1847C2.75041 13.5189 2.75 12.6751 2.75 11.5H1.25ZM7.8025 18.2416C6.54706 18.2199 5.88923 18.1401 5.37359 17.9265L4.79957 19.3123C5.60454 19.6457 6.52138 19.7197 7.77666 19.7413L7.8025 18.2416ZM1.68769 16.2004C2.27128 17.6093 3.39066 18.7287 4.79957 19.3123L5.3736 17.9265C4.33223 17.4951 3.50486 16.6678 3.07351 15.6264L1.68769 16.2004ZM21.25 11.5C21.25 12.6751 21.2496 13.5189 21.2042 14.1847C21.1592 14.8438 21.0726 15.2736 20.9265 15.6264L22.3123 16.2004C22.5468 15.6344 22.6505 15.0223 22.7007 14.2868C22.7504 13.5581 22.75 12.6546 22.75 11.5H21.25ZM16.2233 19.7413C17.4786 19.7197 18.3955 19.6457 19.2004 19.3123L18.6264 17.9265C18.1108 18.1401 17.4529 18.2199 16.1975 18.2416L16.2233 19.7413ZM20.9265 15.6264C20.4951 16.6678 19.6678 17.4951 18.6264 17.9265L19.2004 19.3123C20.6093 18.7287 21.7287 17.6093 22.3123 16.2004L20.9265 15.6264ZM13.5 2.75C15.1512 2.75 16.337 2.75079 17.2619 2.83873C18.1757 2.92561 18.7571 3.09223 19.2206 3.37628L20.0044 2.09732C19.2655 1.64457 18.4274 1.44279 17.4039 1.34547C16.3915 1.24921 15.1222 1.25 13.5 1.25V2.75ZM22.75 10.5C22.75 8.87781 22.7508 7.6085 22.6545 6.59611C22.5572 5.57256 22.3554 4.73445 21.9027 3.99563L20.6237 4.77938C20.9078 5.24291 21.0744 5.82434 21.1613 6.73809C21.2492 7.663 21.25 8.84876 21.25 10.5H22.75ZM19.2206 3.37628C19.7925 3.72672 20.2733 4.20752 20.6237 4.77938L21.9027 3.99563C21.4286 3.22194 20.7781 2.57144 20.0044 2.09732L19.2206 3.37628ZM10.5 1.25C8.87781 1.25 7.6085 1.24921 6.59611 1.34547C5.57256 1.44279 4.73445 1.64457 3.99563 2.09732L4.77938 3.37628C5.24291 3.09223 5.82434 2.92561 6.73809 2.83873C7.663 2.75079 8.84876 2.75 10.5 2.75V1.25ZM2.75 10.5C2.75 8.84876 2.75079 7.663 2.83873 6.73809C2.92561 5.82434 3.09223 5.24291 3.37628 4.77938L2.09732 3.99563C1.64457 4.73445 1.44279 5.57256 1.34547 6.59611C1.24921 7.6085 1.25 8.87781 1.25 10.5H2.75ZM3.99563 2.09732C3.22194 2.57144 2.57144 3.22194 2.09732 3.99563L3.37628 4.77938C3.72672 4.20752 4.20752 3.72672 4.77938 3.37628L3.99563 2.09732ZM11.0166 20.0898C10.8136 19.7468 10.6354 19.4441 10.4621 19.2063C10.2795 18.9559 10.0702 18.7304 9.77986 18.5615L9.02572 19.8582C9.07313 19.8857 9.13772 19.936 9.24985 20.0898C9.37122 20.2564 9.50835 20.4865 9.72579 20.8539L11.0166 20.0898ZM7.77666 19.7413C8.21575 19.7489 8.49387 19.7545 8.70588 19.7779C8.90399 19.7999 8.98078 19.832 9.02572 19.8582L9.77986 18.5615C9.4871 18.3912 9.18246 18.3215 8.87097 18.287C8.57339 18.2541 8.21375 18.2487 7.8025 18.2416L7.77666 19.7413ZM14.2742 20.8539C14.4916 20.4865 14.6287 20.2564 14.7501 20.0898C14.8622 19.936 14.9268 19.8857 14.9742 19.8582L14.2201 18.5615C13.9298 18.7304 13.7204 18.9559 13.5379 19.2063C13.3646 19.4441 13.1864 19.7468 12.9833 20.0898L14.2742 20.8539ZM16.1975 18.2416C15.7862 18.2487 15.4266 18.2541 15.129 18.287C14.8175 18.3215 14.5129 18.3912 14.2201 18.5615L14.9742 19.8582C15.0192 19.832 15.096 19.7999 15.2941 19.7779C15.5061 19.7545 15.7842 19.7489 16.2233 19.7413L16.1975 18.2416Z"
                                    fill="currentColor" />
                            </svg>

                            Click User To Chat
                        </p>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="isShowUserChat && currentUser.wb_cus_id > 0">
                <div class="relative h-full pb-[68px]">
                    <div class="flex items-center justify-between p-4">
                        <div class="flex w-full items-center space-x-2 rtl:space-x-reverse">
                            <button type="button" class="hover:text-primary xl:hidden"
                                (click)="isShowChatMenu = !isShowChatMenu">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg" class="h-6 w-6">
                                    <path d="M20 7L4 7" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" />
                                    <path opacity="0.5" d="M20 12L4 12" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" />
                                    <path d="M20 17L4 17" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" />
                                </svg>
                            </button>
                            <div class="relative flex-none">
                                <img [src]="'./assets/images/person_icon.png'"
                                    class="h-10 w-10 rounded-full object-cover sm:h-12 sm:w-12" />
                                <!-- <div class="absolute bottom-0 ltr:right-0 rtl:left-0">
                                    <div class="h-4 w-4 rounded-full bg-success"></div>
                                </div> -->
                            </div>
                            <div class="mx-3 w-full">
                                <p class="font-semibold" (click)="labelmodal.open()">
                                    {{ currentUser.wb_cus_name }}
                                </p>
                                <div class="flex gap-1 ">
                                    <p class="text-xs text-white-dark" ngxTippy="{{ currentUser.wb_cus_mobile }}"
                                        [tippyProps]="{placement: 'bottom'}" style="width: fit-content;"
                                        (click)="labelmodal.open()">*******{{
                                        currentUser.wb_cus_mobile | slice : -5}}
                                    </p>
                                    <a (click)="copytext(currentUser.wb_cus_mobile)" style=" cursor: pointer;"
                                        ngxTippy="Copy Number">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M6 11C6 8.17157 6 6.75736 6.87868 5.87868C7.75736 5 9.17157 5 12 5H15C17.8284 5 19.2426 5 20.1213 5.87868C21 6.75736 21 8.17157 21 11V16C21 18.8284 21 20.2426 20.1213 21.1213C19.2426 22 17.8284 22 15 22H12C9.17157 22 7.75736 22 6.87868 21.1213C6 20.2426 6 18.8284 6 16V11Z"
                                                stroke="#09a4f0" stroke-width="1.5" />
                                            <path
                                                d="M6 19C4.34315 19 3 17.6569 3 16V10C3 6.22876 3 4.34315 4.17157 3.17157C5.34315 2 7.22876 2 11 2H15C16.6569 2 18 3.34315 18 5"
                                                stroke="#09a4f0" stroke-width="1.5" />
                                        </svg>
                                    </a>
                                </div>
                                <!-- <p class="text-xs text-white-dark">
                                    {{
                                        currentUser.active
                                            ? 'Active now'
                                            : 'Last seen at
                                    ' + selectedUser.time
                                    }}
                                </p> -->
                            </div>
                            <div style="width: inherit">
                                <span class="badge rounded-full bg-primary"
                                    *ngIf="currentUser.lead_status == '1'">Open</span>
                                <span class="badge rounded-full bg-primary"
                                    *ngIf="currentUser.lead_status == '8'">Pending Purpose</span>
                            </div>
                            <div style="float: right" class="w-full">
                                <button type="button" class="btn btn-sm btn-outline-primary" style="float: right"
                                    *ngIf="this.currentUser.lead_id > 0"
                                    (click)="openLeadDetails(this.currentUser.lead_id)">
                                    Current Lead - {{ this.currentUser.lead_code }}
                                </button>
                            </div>
                            <div hlMenu class="dropdown">
                                <button type="button" hlMenuButton
                                    class="!flex h-8 w-8 items-center justify-center rounded-full bg-[#f4f4f4] hover:bg-primary-light dark:bg-[#1b2e4b]">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="h-5 w-5 rotate-90 opacity-70 hover:text-danger">
                                        <circle cx="5" cy="12" r="2" stroke="currentColor" stroke-width="1.5" />
                                        <circle opacity="0.5" cx="12" cy="12" r="2" stroke="currentColor"
                                            stroke-width="1.5" />
                                        <circle cx="19" cy="12" r="2" stroke="currentColor" stroke-width="1.5" />
                                    </svg>
                                </button>
                                <ul *hlMenuItems @toggleAnimation
                                    class="text-black ltr:right-0 rtl:left-0 dark:text-white-dark">
                                    <li style="min-width: 150px">
                                        <a (click)="blockCustomer()" style="cursor: pointer" *hlMenuItem="let menuItem"
                                            class="hover:text-danger">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                xmlns="http://www.w3.org/2000/svg"
                                                class="h-4 w-4 shrink-0 ltr:mr-2 rtl:ml-2">
                                                <circle cx="12" cy="6" r="4" stroke="currentColor" stroke-width="1.5" />
                                                <path
                                                    d="M15.5 13.5351C14.4704 13.1948 13.275 13 12 13C8.13401 13 5 14.7909 5 17C5 19.2091 5 21 12 21C12.3506 21 12.6836 20.9955 13 20.9867"
                                                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                <path d="M19.9502 17.0498L16.0502 20.9497" stroke="currentColor"
                                                    stroke-width="1.5" stroke-linecap="round" />
                                                <circle cx="18" cy="19" r="3" stroke="currentColor"
                                                    stroke-width="1.5" />
                                            </svg>

                                            Block User
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="h-px w-full border-b border-[#e0e6ed] dark:border-[#1b2e4b]"></div>
                    <ng-scrollbar #scrollable
                        class="chat-conversation-box relative !h-[calc(100vh_-_289px)] min-h-[300px] bg-[url('https://autoversa-media.s3.me-central-1.amazonaws.com/crm_whatsapp_media/chat_back.jpg')] bg-center sm:!h-[calc(100vh_-_300px)]"
                        visibility="native">
                        <div class="space-y-5 p-4">
                            <div class="m-6 mt-0 block">
                                <h4 class="relative border-b border-[#f4f4f4] text-center text-xs dark:border-gray-800">
                                    <span class="relative top-2 bg-white px-3 dark:bg-[#0e1726]">Conversation
                                        Beginning</span>
                                </h4>
                            </div>
                            <ng-container *ngIf="currentUserMessages && currentUserMessages.length > 0">
                                <div *ngFor="let message of currentUserMessages">
                                    <div class="flex items-start gap-3"
                                        [ngClass]="{ 'justify-end': message.alm_wb_msg_source == '2' }">
                                        <div class="flex-none"
                                            [ngClass]="{ 'order-2': message.alm_wb_msg_source == '2' }">
                                            <ng-container *ngIf="message.alm_wb_msg_source == '2'">
                                                <img [src]="'./assets/images/chat_support.png'"
                                                    class="h-10 w-10 rounded-full object-cover" />
                                            </ng-container>
                                            <ng-container *ngIf="message.alm_wb_msg_source != '2'">
                                                <img [src]="'./assets/images/person_icon.png'"
                                                    class="h-10 w-10 rounded-full object-cover" />
                                            </ng-container>
                                        </div>
                                        <div class="space-y-2" style="max-width: 35vw">
                                            <!-- <div hlMenu class="dropdown">
                                                <button type="button" hlMenuButton
                                                    class="rounded-md bg-[#f4f4f4] p-2 hover:bg-primary-light hover:text-primary dark:bg-[#1b2e4b]"
                                                    *ngIf="message.alm_wb_msg_type == '4'"
                                                    [style.float]="message.alm_wb_msg_source == '2' ? 'right' : 'left'"
                                                    (contextmenu)="onRightClick($event)">
                                                    <div class="rounded-md bg-white p-4 py-2 dark:bg-gray-900"
                                                        [ngClass]="
                                                  message.alm_wb_msg_source == '2'
                                                      ? 'bg-success-light-green ltr:rounded-br-none rtl:rounded-bl-none'
                                                      : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                              " style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600"
                                                        [style.white-space]="'pre-line'">
                                                        {{ message.alm_wb_msg_content }}
                                                    </div>
                                                </button>
                                                <ul *hlMenuItems @toggleAnimation
                                                    class="bottom-full !mt-0 mb-1 whitespace-nowrap ltr:right-0 rtl:left-0"
                                                    style="padding: 0">
                                                    <li>
                                                        <button type="button"
                                                            class="btn btn-outline-primary">Delete</button>
                                                    </li>
                                                    <li>
                                                        <button type="button"
                                                            class="btn btn-outline-primary">Forward</button>
                                                    </li>
                                                </ul>
                                            </div> -->
                                            <div class="flex items-center gap-3" *ngIf="message.alm_wb_msg_type == '4'"
                                                [style.float]="message.alm_wb_msg_source == '2' ? 'right' : 'left'"
                                                (contextmenu)="onRightClick($event)">
                                                <!-- <div *ngIf="message.alm_wb_msg_reply_id != 0"
                                                    class="reply-container mb-2 p-2">
                                                    
                                                </div> -->

                                                <div class="rounded-md flex bg-white p-4 py-2 dark:bg-gray-900"
                                                    [ngClass]="message.alm_wb_msg_source == '2' ? 'bg-success-light-green ltr:rounded-br-none rtl:rounded-bl-none' : 'ltr:rounded-bl-none rtl:rounded-br-none'"
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600"
                                                    [style.white-space]="'pre-line'">
                                                    <!-- <div class="flex-row mt-1">
                                                        <div class="reply-message"
                                                            *ngIf="message.alm_wb_msg_reply_id != 0">
                                                            {{ getRepliedMessage(message.alm_wb_msg_reply_id)}}
                                                        </div>
                                                        {{ message.alm_wb_msg_content }}
                                                    </div> -->
                                                    <div class="flex-row mt-1">
                                                        <div class="reply-message"
                                                            *ngIf="message.alm_wb_msg_reply_id != 0">
                                                            <!-- Check if type is 4 and display the truncated message -->
                                                            <ng-container
                                                                *ngIf="getRepliedMessage(message.alm_wb_msg_reply_id)?.type === '4'">
                                                                {{
                                                                getRepliedMessage(message.alm_wb_msg_reply_id)?.content
                                                                }}
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="getRepliedMessage(message.alm_wb_msg_reply_id)?.type === '12'">
                                                                <google-map
                                                                    *ngIf="getRepliedMessage(message.alm_wb_msg_reply_id)?.type === '12' && isValidLatLng(getRepliedMessage(message.alm_wb_msg_reply_id)?.content)"
                                                                    [center]="parseLatLng(getRepliedMessage(message.alm_wb_msg_reply_id)?.content)"
                                                                    [zoom]="zoom" height="50" width="150"
                                                                    (click)="getGoogleMapsLink(getRepliedMessage(message.alm_wb_msg_reply_id)?.content)">
                                                                    <map-marker
                                                                        [position]="parseLatLng(getRepliedMessage(message.alm_wb_msg_reply_id)?.content)">
                                                                    </map-marker>
                                                                </google-map>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="getRepliedMessage(message.alm_wb_msg_reply_id)?.type === '1'">
                                                                <audio controls style="height: 15px;width: 250px;">
                                                                    <source
                                                                        [src]="'https://autoversa-media.s3.me-central-1.amazonaws.com/' +  getRepliedMessage(message.alm_wb_msg_reply_id)?.content"
                                                                        type="audio/ogg" />
                                                                    Your browser does not support the audio element.
                                                                </audio>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="getRepliedMessage(message.alm_wb_msg_reply_id)?.type === '5'">
                                                                <img [src]="'https://autoversa-media.s3.me-central-1.amazonaws.com/' + getRepliedMessage(message.alm_wb_msg_reply_id)?.content"
                                                                    width="100" height="10px"
                                                                    style="max-height: 300px !important"
                                                                    (click)="openImageModal(getRepliedMessage(message.alm_wb_msg_reply_id)?.content)" />
                                                            </ng-container>
                                                        </div>
                                                        {{ message.alm_wb_msg_content }}
                                                    </div>
                                                    <div hlMenu class="dropdown">
                                                        <button type="button" hlMenuButton
                                                            class="btn dropdown-toggle rounded-none border-0 p-0 text-black shadow-none hover:text-primary dark:text-white-dark dark:hover:text-primary">
                                                            <svg width="12" height="18" viewBox="0 0 24 24" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M19 9L12 15L5 9" stroke="#1C274C"
                                                                    stroke-width="3.5" stroke-linecap="round"
                                                                    stroke-linejoin="round" />
                                                            </svg>
                                                        </button>
                                                        <ul *hlMenuItems @toggleAnimation
                                                            class="text-black ltr:right-0 rtl:left-0 dark:text-white-dark bottom-full !mt-0 mb-1 whitespace-nowrap "
                                                            style=" background: floralwhite; " appendTo="body">
                                                            <li style="min-width: 150px">
                                                                <a (click)="openContextMenu($event, message)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M20.5 6H3.49988" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path
                                                                            d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M9.5 11L10 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path d="M14.5 11L14 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                    </svg> &nbsp;
                                                                    Delete
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onForward(message,1)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M19.5 12L14.5 7M19.5 12L14.5 17M19.5 12L13 12M9.5 12C7.83333 12 4.5 13 4.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Forward
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onReply(message)" style="cursor: pointer"
                                                                    *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M4.5 12L9.5 7M4.5 12L9.5 17M4.5 12L11 12M14.5 12C16.1667 12 19.5 13 19.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Reply
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3" *ngIf="message.alm_wb_msg_type == '5'"
                                                style="max-width: 310px">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                      message.alm_wb_msg_source == '2'
                                                        ? 'bg-success-light-green ltr:rounded-br-none rtl:rounded-bl-none'
                                                        : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                                        "
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <div hlMenu class="dropdown" style="float:right">
                                                        <button type="button" hlMenuButton
                                                            class="btn dropdown-toggle rounded-none border-0 p-0 text-black shadow-none hover:text-primary dark:text-white-dark dark:hover:text-primary">
                                                            <svg width="12" height="18" viewBox="0 0 24 24" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M19 9L12 15L5 9" stroke="#1C274C"
                                                                    stroke-width="3.5" stroke-linecap="round"
                                                                    stroke-linejoin="round" />
                                                            </svg>
                                                        </button>
                                                        <ul *hlMenuItems @toggleAnimation
                                                            class="text-black ltr:right-0 rtl:left-0 dark:text-white-dark bottom-full !mt-0 mb-1 whitespace-nowrap "
                                                            style=" background: floralwhite; " appendTo="body">
                                                            <li style="min-width: 150px">
                                                                <a (click)="openContextMenu($event, message)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M20.5 6H3.49988" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path
                                                                            d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M9.5 11L10 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path d="M14.5 11L14 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                    </svg> &nbsp;
                                                                    Delete
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onForward(message,3)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M19.5 12L14.5 7M19.5 12L14.5 17M19.5 12L13 12M9.5 12C7.83333 12 4.5 13 4.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Forward
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onReply(message)" style="cursor: pointer"
                                                                    *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M4.5 12L9.5 7M4.5 12L9.5 17M4.5 12L11 12M14.5 12C16.1667 12 19.5 13 19.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Reply
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <img [src]="'https://autoversa-media.s3.me-central-1.amazonaws.com/' + message.alm_wb_msg_content"
                                                        width="300" height="180" style="max-height: 300px !important"
                                                        (click)="openImageModal(message.alm_wb_msg_content)" />
                                                    <label class="mt-2 pl-2" *ngIf="message.alm_wb_msg_caption != ''"
                                                        [style.white-space]="'pre-line'">{{
                                                        message.alm_wb_msg_caption
                                                        }}</label>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3" *ngIf="message.alm_wb_msg_type == '1'">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                            message.alm_wb_msg_source == '2'
                                                                ? 'bg-success-light-green text-white ltr:rounded-br-none rtl:rounded-bl-none'
                                                                : 'ltr:rounded-bl-none rtl:rounded-br-none'"
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <div hlMenu class="dropdown" style="float:right">
                                                        <button type="button" hlMenuButton
                                                            class="btn dropdown-toggle rounded-none border-0 p-0 text-black shadow-none hover:text-primary dark:text-white-dark dark:hover:text-primary">
                                                            <svg width="12" height="18" viewBox="0 0 24 24" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M19 9L12 15L5 9" stroke="#1C274C"
                                                                    stroke-width="3.5" stroke-linecap="round"
                                                                    stroke-linejoin="round" />
                                                            </svg>
                                                        </button>
                                                        <ul *hlMenuItems @toggleAnimation
                                                            class="text-black ltr:right-0 rtl:left-0 dark:text-white-dark bottom-full !mt-0 mb-1 whitespace-nowrap "
                                                            style=" background: floralwhite; " appendTo="body">
                                                            <li style="min-width: 150px">
                                                                <a (click)="openContextMenu($event, message)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M20.5 6H3.49988" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path
                                                                            d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M9.5 11L10 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path d="M14.5 11L14 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                    </svg> &nbsp;
                                                                    Delete
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onForward(message,4)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M19.5 12L14.5 7M19.5 12L14.5 17M19.5 12L13 12M9.5 12C7.83333 12 4.5 13 4.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Forward
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onReply(message)" style="cursor: pointer"
                                                                    *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M4.5 12L9.5 7M4.5 12L9.5 17M4.5 12L11 12M14.5 12C16.1667 12 19.5 13 19.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Reply
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <audio controls>
                                                        <source
                                                            [src]="'https://autoversa-media.s3.me-central-1.amazonaws.com/' + message.alm_wb_msg_content"
                                                            type="audio/ogg" />
                                                        Your browser does not support the audio element.
                                                    </audio>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3"
                                                *ngIf="message.alm_wb_msg_type == '11'">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                        message.alm_wb_msg_source == '2'
                                                            ? 'bg-success-light-green text-white ltr:rounded-br-none rtl:rounded-bl-none'
                                                            : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                                     "
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <video controls width="300" height="300">
                                                        <source
                                                            [src]="'https://autoversa-media.s3.me-central-1.amazonaws.com/' + message.alm_wb_msg_content"
                                                            type="video/mp4" />
                                                        Your browser does not support the video tag.
                                                    </video>

                                                    <label class="mt-2 pl-2" *ngIf="message.alm_wb_msg_caption != ''">{{
                                                        message.alm_wb_msg_caption }}</label>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3" *ngIf="message.alm_wb_msg_type == '8'">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                        message.alm_wb_msg_source == '2'
                                                            ? 'bg-success-light-green text-white ltr:rounded-br-none rtl:rounded-bl-none'
                                                            : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                                    "
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <img [src]="'https://autoversa-media.s3.me-central-1.amazonaws.com/' + message.alm_wb_msg_content"
                                                        width="100" height="100" />
                                                    <label class="mt-2 pl-2" *ngIf="message.alm_wb_msg_caption != ''">{{
                                                        message.alm_wb_msg_caption }}</label>
                                                </div>
                                            </div>

                                            <div class="flex items-center gap-3"
                                                *ngIf="message.alm_wb_msg_type == '12'">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                        message.alm_wb_msg_source == '2'
                                                            ? 'bg-success-light-green text-white ltr:rounded-br-none rtl:rounded-bl-none'
                                                            : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                                    "
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <div hlMenu class="dropdown" style="float:right">
                                                        <button type="button" hlMenuButton
                                                            class="btn dropdown-toggle rounded-none border-0 p-0 text-black shadow-none hover:text-primary dark:text-white-dark dark:hover:text-primary">
                                                            <svg width="12" height="18" viewBox="0 0 24 24" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M19 9L12 15L5 9" stroke="#1C274C"
                                                                    stroke-width="3.5" stroke-linecap="round"
                                                                    stroke-linejoin="round" />
                                                            </svg>
                                                        </button>
                                                        <ul *hlMenuItems @toggleAnimation
                                                            class="text-black ltr:right-0 rtl:left-0 dark:text-white-dark bottom-full !mt-0 mb-1 whitespace-nowrap "
                                                            style=" background: floralwhite; " appendTo="body">
                                                            <li style="min-width: 150px">
                                                                <a (click)="openContextMenu($event, message)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M20.5 6H3.49988" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path
                                                                            d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round" />
                                                                        <path d="M9.5 11L10 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                        <path d="M14.5 11L14 16" stroke="currentColor"
                                                                            stroke-width="1.5" stroke-linecap="round" />
                                                                    </svg> &nbsp;
                                                                    Delete
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onForward(message,2)"
                                                                    style="cursor: pointer" *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M19.5 12L14.5 7M19.5 12L14.5 17M19.5 12L13 12M9.5 12C7.83333 12 4.5 13 4.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Forward
                                                                </a>
                                                            </li>
                                                            <li style="min-width: 150px">
                                                                <a (click)="onReply(message)" style="cursor: pointer"
                                                                    *hlMenuItem="let menuItem"
                                                                    class="hover:text-danger">
                                                                    <svg width="19" height="19" viewBox="0 0 24 24"
                                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M4.5 12L9.5 7M4.5 12L9.5 17M4.5 12L11 12M14.5 12C16.1667 12 19.5 13 19.5 17"
                                                                            stroke="currentColor" stroke-width="1.5"
                                                                            stroke-linecap="round"
                                                                            stroke-linejoin="round" />
                                                                    </svg>
                                                                    &nbsp;
                                                                    Reply
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- Check if content is valid JSON and has lat and lng -->
                                                    <google-map *ngIf="isValidLatLng(message.alm_wb_msg_content)"
                                                        [center]="parseLatLng(message.alm_wb_msg_content)" [zoom]="zoom"
                                                        height="250" width="350"
                                                        (click)="getGoogleMapsLink(message.alm_wb_msg_content)">
                                                        <map-marker
                                                            [position]="parseLatLng(message.alm_wb_msg_content)"></map-marker>
                                                    </google-map>
                                                    <span *ngIf="!isValidLatLng(message.alm_wb_msg_content)">
                                                        Invalid coordinates{{message.alm_wb_msg_content}}
                                                    </span>
                                                    <!-- <google-map [center]="message.alm_wb_msg_content | parseJson"
                                                        [zoom]="zoom" height="250" width="350">
                                                        <map-marker
                                                            [position]="message.alm_wb_msg_content | parseJson"></map-marker>
                                                    </google-map> -->
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3"
                                                *ngIf="message.alm_wb_msg_type == '13'">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                        message.alm_wb_msg_source == '2'
                                                            ? 'bg-success-light-green text-white ltr:rounded-br-none rtl:rounded-bl-none'
                                                            : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                                    "
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <ng-container
                                                        *ngIf="message.alm_wb_msg_content == 'welcome_template'">
                                                        <label>Thank you for contacting *Al Maraghi Auto Repairs*!
                                                            We're
                                                            excited to assist you. How can we help
                                                            you today?</label>
                                                        <span
                                                            class="badge mr-2 rounded-none bg-warning">Appointment</span>
                                                        <span class="badge mr-2 rounded-none bg-warning">Service
                                                            Enq.</span>
                                                        <span class="badge mr-2 rounded-none bg-warning">General
                                                            Enq.</span>
                                                    </ng-container>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3" *ngIf="message.alm_wb_msg_type == '6'">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                        message.alm_wb_msg_source == '2'
                                                            ? 'bg-success-light-green text-white ltr:rounded-br-none rtl:rounded-bl-none'
                                                            : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                                    "
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <span class="badge rounded-none bg-success">{{
                                                        message.alm_wb_msg_content }}</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3" *ngIf="message.alm_wb_msg_type == '3'">
                                                <div class="rounded-md bg-white p-1 dark:bg-gray-800" [ngClass]="
                                                        message.alm_wb_msg_source == '2'
                                                            ? 'bg-success-light-green text-white ltr:rounded-br-none rtl:rounded-bl-none'
                                                            : 'ltr:rounded-bl-none rtl:rounded-br-none'
                                                    "
                                                    style="box-shadow: 2px 2px 0.9px rgba(11, 20, 26, 0.1); color: #000; font-weight: 600">
                                                    <blockquote (click)="downloadFile(message.alm_wb_msg_content)"
                                                        style="cursor: pointer"
                                                        class="rounded-br-md rounded-tr-md border border-l-2 border-white-light !border-l-primary bg-white p-5 text-black shadow-md ltr:pl-3.5 rtl:pr-3.5 dark:border-[#060818] dark:bg-[#060818]">
                                                        <div class="flex items-start items-center justify-center">
                                                            <div class="h-10 w-10 flex-none ltr:mr-5 rtl:ml-5">
                                                                <img src="./assets/images/no_file.png" alt=""
                                                                    class="m-auto h-8 w-8 object-contain" />
                                                            </div>
                                                            <p
                                                                class="m-0 text-sm not-italic text-[#515365] dark:text-white-light">
                                                                Download Attachment</p>
                                                        </div>
                                                    </blockquote>
                                                </div>
                                            </div>

                                            <div class="flex-1 text-xs text-white-dark"
                                                [ngClass]="{ 'ltr:text-right rtl:text-left': currentUser.wb_cus_id === message.alm_wb_msg_customer }">
                                                <div style="display: inline-flex" class="items-center">
                                                    <svg ngxTippy="Message Send" width="16" height="16"
                                                        viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg" class="mr-1"
                                                        *ngIf="message.alm_wb_msg_status == '1' && message.alm_wb_msg_source == '2'">
                                                        <path d="M7 12.9L10.1429 16.5L18 7.5" stroke="currentColor"
                                                            stroke-width="3.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                    <svg ngxTippy="Message Failed" [tippyProps]="{ theme: 'danger' }"
                                                        width="12" height="12" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg" class="mr-1"
                                                        *ngIf="message.alm_wb_msg_status == '4' && message.alm_wb_msg_source == '2'">
                                                        <path
                                                            d="M5.31171 10.7615C8.23007 5.58716 9.68925 3 12 3C14.3107 3 15.7699 5.58716 18.6883 10.7615L19.0519 11.4063C21.4771 15.7061 22.6897 17.856 21.5937 19.428C20.4978 21 17.7864 21 12.3637 21H11.6363C6.21356 21 3.50217 21 2.40626 19.428C1.31034 17.856 2.52291 15.7061 4.94805 11.4063L5.31171 10.7615Z"
                                                            stroke="#e7515a" stroke-width="3.5" />
                                                        <path d="M12 8V13" stroke="#e7515a" stroke-width="1.5"
                                                            stroke-linecap="round" />
                                                        <circle cx="12" cy="16" r="1" fill="#e7515a" />
                                                    </svg>

                                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg" class="mr-1"
                                                        *ngIf="message.alm_wb_msg_status == '2' && message.alm_wb_msg_source == '2'"
                                                        ngxTippy="Message Delivered" [tippyProps]="{ theme: 'info' }">
                                                        <path d="M4 12.9L7.14286 16.5L15 7.5" stroke="currentColor"
                                                            stroke-width="3.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                        <path d="M20 7.5625L11.4283 16.5625L11 16" stroke="currentColor"
                                                            stroke-width="3.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg" class="mr-1"
                                                        *ngIf="message.alm_wb_msg_status == '3' && message.alm_wb_msg_source == '2'"
                                                        ngxTippy="Message Read" [tippyProps]="{ theme: 'success' }">
                                                        <path d="M4 12.9L7.14286 16.5L15 7.5" stroke="#2196f3"
                                                            stroke-width="3.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                        <path d="M20 7.5625L11.4283 16.5625L11 16" stroke="#2196f3"
                                                            stroke-width="3.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                    {{ message.alm_wb_msg_created_on | date : 'dd/MM/yyyy HH:mm' }}
                                                    {{message.us_firstname}}
                                                </div>


                                            </div>
                                            <!-- <div style="display: inline-flex !important">
                                                <div *ngIf="showButtons" style="display: inherit;">
                                                    <button type="button" class="btn-sm btn btn-outline-primary mr-1"
                                                        (click)="openContextMenu($event,message)">
                                                        Delete
                                                    </button>
                                                    <button type="button" class="btn btn-outline-primary mr-1"
                                                        (click)="onForward(message)">
                                                        Forward
                                                    </button>
                                                    <button type="button" class="btn btn-outline-primary"
                                                        (click)="onReply(message)">
                                                        Reply
                                                    </button>
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </div>
                    </ng-scrollbar>
                    <div class="absolute bottom-0 left-0 w-full p-4" style="background-color: #fff !important">
                        <div *ngIf="replyId != 0" class="reply-message-container bg-gray-100 p-2 rounded mb-2 relative">
                            <!-- Reply content -->
                            <p class="text-gray-700 text-sm">{{replyMessage}}</p>
                            <!-- Close reply -->
                            <button type="button" class="absolute top-0 right-0 p-1" (click)="clearReply()">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        <div class="w-full items-center space-x-3 rtl:space-x-reverse sm:flex">
                            <button type="button"
                                class="rounded-md bg-[#f4f4f4] p-2 hover:bg-primary-light hover:text-primary dark:bg-[#1b2e4b]"
                                (click)="toggleEmojiPicker()">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="10" stroke="#1C274C" stroke-width="1.5" />
                                    <path d="M9 16C9.85038 16.6303 10.8846 17 12 17C13.1154 17 14.1496 16.6303 15 16"
                                        stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" />
                                    <path
                                        d="M16 10.5C16 11.3284 15.5523 12 15 12C14.4477 12 14 11.3284 14 10.5C14 9.67157 14.4477 9 15 9C15.5523 9 16 9.67157 16 10.5Z"
                                        fill="#1C274C" />
                                    <ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="#1C274C" />
                                </svg>
                            </button>
                            <emoji-mart class="emoji-mart"
                                [style]="{ position: 'absolute', bottom: '10vh', left: '1vw' }" [showPreview]="false"
                                *ngIf="showEmojiPicker" (emojiSelect)="addEmoji($event)"
                                title="Pick your emoji…"></emoji-mart>

                            <div class="relative flex-1">
                                <textarea class="form-input border-0 bg-[#f4f4f4] px-2 py-2 focus:outline-none"
                                    placeholder="Type a message" [(ngModel)]="textMessage" name="textMessage"
                                    (input)="adjustHeight($event)" [style.height.px]="height"
                                    [style.maxHeight.px]="maxHeight"
                                    [style.overflowY]="height >= maxHeight ? 'auto' : 'hidden'" rows="1"
                                    style="width: 100%; resize: none" (keydown)="handleKeydown($event)"></textarea>
                                <!-- <button type="button"
                                    class="absolute top-1/2 -translate-y-1/2 hover:text-primary ltr:left-4 rtl:right-4">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5">
                                        <circle opacity="0.5" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="1.5" />
                                        <path
                                            d="M9 16C9.85038 16.6303 10.8846 17 12 17C13.1154 17 14.1496 16.6303 15 16"
                                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                        <path
                                            d="M16 10.5C16 11.3284 15.5523 12 15 12C14.4477 12 14 11.3284 14 10.5C14 9.67157 14.4477 9 15 9C15.5523 9 16 9.67157 16 10.5Z"
                                            fill="currentColor" />
                                        <ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="currentColor" />
                                    </svg>
                                </button> -->
                                <button type="button"
                                    class="absolute top-1/2 -translate-y-1/2 hover:text-primary ltr:right-4 rtl:left-4"
                                    (click)="sendMessage()">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5">
                                        <path
                                            d="M17.4975 18.4851L20.6281 9.09373C21.8764 5.34874 22.5006 3.47624 21.5122 2.48782C20.5237 1.49939 18.6511 2.12356 14.906 3.37189L5.57477 6.48218C3.49295 7.1761 2.45203 7.52305 2.13608 8.28637C2.06182 8.46577 2.01692 8.65596 2.00311 8.84963C1.94433 9.67365 2.72018 10.4495 4.27188 12.0011L4.55451 12.2837C4.80921 12.5384 4.93655 12.6658 5.03282 12.8075C5.22269 13.0871 5.33046 13.4143 5.34393 13.7519C5.35076 13.9232 5.32403 14.1013 5.27057 14.4574C5.07488 15.7612 4.97703 16.4131 5.0923 16.9147C5.32205 17.9146 6.09599 18.6995 7.09257 18.9433C7.59255 19.0656 8.24576 18.977 9.5522 18.7997L9.62363 18.79C9.99191 18.74 10.1761 18.715 10.3529 18.7257C10.6738 18.745 10.9838 18.8496 11.251 19.0285C11.3981 19.1271 11.5295 19.2585 11.7923 19.5213L12.0436 19.7725C13.5539 21.2828 14.309 22.0379 15.1101 21.9985C15.3309 21.9877 15.5479 21.9365 15.7503 21.8474C16.4844 21.5244 16.8221 20.5113 17.4975 18.4851Z"
                                            stroke="currentColor" stroke-width="1.5" />
                                        <path opacity="0.5" d="M6 18L21 3" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round" />
                                    </svg>
                                </button>
                            </div>
                            <div class="hidden items-center space-x-3 py-3 rtl:space-x-reverse sm:block sm:py-0">
                                <div hlMenu class="dropdown">
                                    <button type="button" hlMenuButton
                                        class="rounded-md bg-[#f4f4f4] p-2 hover:bg-primary-light hover:text-primary dark:bg-[#1b2e4b]">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg" class="h-5 w-5">
                                            <circle cx="12" cy="13" r="3" stroke="currentColor" stroke-width="1.5" />
                                            <path opacity="0.5"
                                                d="M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"
                                                stroke="currentColor" stroke-width="1.5" />
                                            <path d="M19 10H18" stroke="currentColor" stroke-width="1.5"
                                                stroke-linecap="round" />
                                        </svg>
                                    </button>
                                    <ul *hlMenuItems @toggleAnimation
                                        class="bottom-full !mt-0 mb-1 whitespace-nowrap ltr:right-0 rtl:left-0"
                                        style="padding: 0">
                                        <li>
                                            <button type="button" class="btn-outline-primary" (click)="file1.click()">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    class="h-4 w-4 shrink-0 ltr:mr-2 rtl:ml-2">
                                                    <path
                                                        d="M2 13.4375C2 9.66626 2 7.78065 3.17157 6.60907C4.34315 5.4375 6.22876 5.4375 10 5.4375H14C17.7712 5.4375 19.6569 5.4375 20.8284 6.60907C22 7.78065 22 9.66626 22 13.4375C22 17.2087 22 19.0944 20.8284 20.2659C19.6569 21.4375 17.7712 21.4375 14 21.4375H10C6.22876 21.4375 4.34315 21.4375 3.17157 20.2659C2 19.0944 2 17.2087 2 13.4375Z"
                                                        stroke="#1C274C" stroke-width="1.5" />
                                                    <path
                                                        d="M3.98779 6C4.10022 5.06898 4.33494 4.42559 4.82498 3.93726C5.76553 3 7.27932 3 10.3069 3H13.5181C16.5457 3 18.0595 3 19 3.93726C19.4901 4.42559 19.7248 5.06898 19.8372 6"
                                                        stroke="#1C274C" stroke-width="1.5" />
                                                    <circle cx="17.5" cy="9.9375" r="1.5" stroke="#1C274C"
                                                        stroke-width="1.5" />
                                                    <path
                                                        d="M2 13.9376L3.75159 12.405C4.66286 11.6077 6.03628 11.6534 6.89249 12.5096L11.1822 16.7993C11.8694 17.4866 12.9512 17.5803 13.7464 17.0214L14.0446 16.8119C15.1888 16.0077 16.7369 16.1009 17.7765 17.0365L21 19.9376"
                                                        stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" />
                                                </svg>
                                                Media
                                            </button>
                                            <input id="file-input" type="file" #file1 style="display: none"
                                                accept=".jpeg,.jpg,.png,.mp4,.gif" (change)="onFileChanged($event)" />
                                        </li>
                                        <li>
                                            <button type="button" class="btn-outline-primary" (click)="file2.click()">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    class="h-4 w-4 shrink-0 ltr:mr-2 rtl:ml-2">
                                                    <path
                                                        d="M4 8C4 5.17157 4 3.75736 4.87868 2.87868C5.75736 2 7.17157 2 10 2H14C16.8284 2 18.2426 2 19.1213 2.87868C20 3.75736 20 5.17157 20 8V16C20 18.8284 20 20.2426 19.1213 21.1213C18.2426 22 16.8284 22 14 22H10C7.17157 22 5.75736 22 4.87868 21.1213C4 20.2426 4 18.8284 4 16V8Z"
                                                        stroke="#1C274D" stroke-width="1.5" />
                                                    <path
                                                        d="M19.8978 16H7.89778C6.96781 16 6.50282 16 6.12132 16.1022C5.08604 16.3796 4.2774 17.1883 4 18.2235"
                                                        stroke="#1C274D" stroke-width="1.5" />
                                                    <path d="M8 7H16" stroke="#1C274D" stroke-width="1.5"
                                                        stroke-linecap="round" />
                                                    <path d="M8 10.5H13" stroke="#1C274D" stroke-width="1.5"
                                                        stroke-linecap="round" />
                                                </svg>
                                                Document
                                            </button>
                                            <input id="file-input" type="file" #file2 style="display: none"
                                                accept=".xls,.xlsx,.doc,.docx,.ppt,.pptx,.pdf,.mp4,.jpg,.jpeg,.png"
                                                (change)="onDocumentFileChanged($event)" />
                                        </li>
                                        <li>
                                            <button type="button" class="btn-outline-primary"
                                                (click)="locationmodal.open()">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    class="h-4 w-4 shrink-0 ltr:mr-2 rtl:ml-2">
                                                    <path
                                                        d="M5 8.51464C5 4.9167 8.13401 2 12 2C15.866 2 19 4.9167 19 8.51464C19 12.0844 16.7658 16.2499 13.2801 17.7396C12.4675 18.0868 11.5325 18.0868 10.7199 17.7396C7.23416 16.2499 5 12.0844 5 8.51464Z"
                                                        stroke="#1C274C" stroke-width="1.5" />
                                                    <path
                                                        d="M14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z"
                                                        stroke="#1C274C" stroke-width="1.5" />
                                                    <path
                                                        d="M20.9605 15.5C21.6259 16.1025 22 16.7816 22 17.5C22 19.9853 17.5228 22 12 22C6.47715 22 2 19.9853 2 17.5C2 16.7816 2.37412 16.1025 3.03947 15.5"
                                                        stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" />
                                                </svg>
                                                Location
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="hidden items-center space-x-3 py-3 rtl:space-x-reverse sm:block sm:py-0">
                                <div hlMenu class="dropdown">
                                    <button type="button" hlMenuButton
                                        class="rounded-md bg-[#f4f4f4] p-2 hover:bg-primary-light hover:text-primary dark:bg-[#1b2e4b]">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="12" cy="13" r="9" stroke="currentColor" stroke-width="1.5" />
                                            <path
                                                d="M13.8876 10.9348C14.9625 11.8117 15.5 12.2501 15.5 13C15.5 13.7499 14.9625 14.1883 13.8876 15.0652C13.5909 15.3073 13.2966 15.5352 13.0261 15.7251C12.7888 15.8917 12.5201 16.064 12.2419 16.2332C11.1695 16.8853 10.6333 17.2114 10.1524 16.8504C9.6715 16.4894 9.62779 15.7336 9.54038 14.2222C9.51566 13.7947 9.5 13.3757 9.5 13C9.5 12.6243 9.51566 12.2053 9.54038 11.7778C9.62779 10.2664 9.6715 9.51061 10.1524 9.1496C10.6333 8.78859 11.1695 9.11466 12.2419 9.76679C12.5201 9.93597 12.7888 10.1083 13.0261 10.2749C13.2966 10.4648 13.5909 10.6927 13.8876 10.9348Z"
                                                stroke="#1C274C" stroke-width="1.5" />
                                            <path d="M3.5 4.5L7.50002 2" stroke="currentColor" stroke-width="1.5"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                            <path d="M20.5 4.5L16.5 2" stroke="currentColor" stroke-width="1.5"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </button>
                                    <ul *hlMenuItems @toggleAnimation
                                        class="bottom-full !mt-0 mb-1 whitespace-nowrap ltr:right-0 rtl:left-0"
                                        style="padding: 0;">
                                        <li>
                                            <button type="button" class="btn btn-outline-info"
                                                (click)="sendCampaignMessage()">
                                                <div class="ml-0 flex flex-1">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M22 12C22 15.7712 22 17.6569 20.8284 18.8284C19.6569 20 17.7712 20 14 20H10C6.22876 20 4.34315 20 3.17157 18.8284C2 17.6569 2 15.7712 2 12C2 8.22876 2 6.34315 3.17157 5.17157C4.34315 4 6.22876 4 10 4H14C17.7712 4 19.6569 4 20.8284 5.17157C21.4816 5.82475 21.7706 6.69989 21.8985 8"
                                                            stroke="currentColor" stroke-width="1.5"
                                                            stroke-linecap="round" />
                                                        <path
                                                            d="M18 8L15.8411 9.79908C14.0045 11.3296 13.0861 12.0949 12 12.0949C11.3507 12.0949 10.7614 11.8214 10 11.2744M6 8L6.9 8.75L7.8 9.5"
                                                            stroke="currentColor" stroke-width="1.5"
                                                            stroke-linecap="round" />
                                                    </svg>
                                                    &nbsp;
                                                    Campaign Message
                                                </div>
                                            </button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-outline-success"
                                                (click)="sendCustomerReEngagement()">
                                                <div class="ml-0 flex flex-1">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <circle cx="10" cy="6" r="4" stroke="currentColor"
                                                            stroke-width="1.5" />
                                                        <path
                                                            d="M18.0429 12.3656L18.4865 11.7609L18.4865 11.7609L18.0429 12.3656ZM19 8.69135L18.4813 9.23307C18.7713 9.51077 19.2287 9.51077 19.5187 9.23307L19 8.69135ZM19.9571 12.3656L19.5135 11.7609L19.5135 11.7609L19.9571 12.3656ZM19 12.8276L19 13.5776H19L19 12.8276ZM18.4865 11.7609C18.0686 11.4542 17.6081 11.0712 17.2595 10.6681C16.8912 10.2423 16.75 9.91131 16.75 9.69673H15.25C15.25 10.4666 15.6912 11.1479 16.1249 11.6493C16.5782 12.1735 17.1391 12.6327 17.5992 12.9703L18.4865 11.7609ZM16.75 9.69673C16.75 9.12068 17.0126 8.87002 17.2419 8.78964C17.4922 8.70189 17.9558 8.72986 18.4813 9.23307L19.5187 8.14963C18.6943 7.36028 17.6579 7.05432 16.7457 7.3741C15.8125 7.70123 15.25 8.59955 15.25 9.69673H16.75ZM20.4008 12.9703C20.8609 12.6327 21.4218 12.1735 21.8751 11.6493C22.3088 11.1479 22.75 10.4666 22.75 9.69672H21.25C21.25 9.91132 21.1088 10.2424 20.7405 10.6681C20.3919 11.0713 19.9314 11.4542 19.5135 11.7609L20.4008 12.9703ZM22.75 9.69672C22.75 8.59954 22.1875 7.70123 21.2543 7.37409C20.3421 7.05432 19.3057 7.36028 18.4813 8.14963L19.5187 9.23307C20.0442 8.72986 20.5078 8.70189 20.7581 8.78964C20.9874 8.87002 21.25 9.12068 21.25 9.69672H22.75ZM17.5992 12.9703C17.9678 13.2407 18.3816 13.5776 19 13.5776L19 12.0776C18.9756 12.0776 18.9605 12.0775 18.9061 12.0488C18.8202 12.0034 18.7128 11.9269 18.4865 11.7609L17.5992 12.9703ZM19.5135 11.7609C19.2872 11.9269 19.1798 12.0034 19.0939 12.0488C19.0395 12.0775 19.0244 12.0776 19 12.0776L19 13.5776C19.6184 13.5776 20.0322 13.2407 20.4008 12.9703L19.5135 11.7609Z"
                                                            fill=currentColor />
                                                        <path
                                                            d="M13 20.6151C12.0907 20.8619 11.0736 21 10 21C6.13401 21 3 19.2091 3 17C3 14.7909 6.13401 13 10 13C13.866 13 17 14.7909 17 17C17 17.3453 16.9234 17.6804 16.7795 18"
                                                            stroke="currentColor" stroke-width="1.5"
                                                            stroke-linecap="round" />
                                                    </svg>&nbsp;
                                                    Customer Re-Engagement
                                                </div>

                                            </button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-outline-warning"
                                                (click)="appointmentRemainder.open()">
                                                <div class="ml-0 flex flex-1">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        class="h-4 w-4 shrink-0 ltr:mr-2 rtl:ml-2">
                                                        <circle cx="12" cy="12" r="10" stroke="currentColor"
                                                            stroke-width="1.5" />
                                                        <path d="M12 8V12L14.5 14.5" stroke="currentColor"
                                                            stroke-width="1.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                    Appointment Remainder
                                                </div>

                                            </button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-outline-secondary"
                                                (click)="sendGarageLocation()" style="align-items: flex-start;">
                                                <div class="ml-0 flex flex-1">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M12.5 7.04148C12.3374 7.0142 12.1704 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13C13.6569 13 15 11.6569 15 10C15 9.82964 14.9858 9.6626 14.9585 9.5"
                                                            stroke="currentColor" stroke-width="1.5"
                                                            stroke-linecap="round" />
                                                        <path
                                                            d="M5 15.2161C4.35254 13.5622 4 11.8013 4 10.1433C4 5.64588 7.58172 2 12 2C16.4183 2 20 5.64588 20 10.1433C20 14.6055 17.4467 19.8124 13.4629 21.6744C12.5343 22.1085 11.4657 22.1085 10.5371 21.6744C9.26474 21.0797 8.13831 20.1439 7.19438 19"
                                                            stroke="currentColor" stroke-width="1.5"
                                                            stroke-linecap="round" />
                                                    </svg>&nbsp;
                                                    Location & Timing
                                                </div>
                                            </button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-outline-primary"
                                                (click)="appointment.open()">
                                                <div class="ml-0 flex flex-1">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        class="h-4 w-4 shrink-0 ltr:mr-2 rtl:ml-2">
                                                        <circle cx="12" cy="12" r="10" stroke="currentColor"
                                                            stroke-width="1.5" />
                                                        <path d="M12 8V12L14.5 14.5" stroke="currentColor"
                                                            stroke-width="1.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                    Appointment
                                                </div>

                                            </button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-outline-primary"
                                                (click)="sendMinorService()">
                                                <div class="ml-0 flex flex-1">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        class="h-4 w-4 shrink-0 ltr:mr-2 rtl:ml-2">
                                                        <circle cx="12" cy="12" r="10" stroke="currentColor"
                                                            stroke-width="1.5" />
                                                        <path d="M12 8V12L14.5 14.5" stroke="currentColor"
                                                            stroke-width="1.5" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                    Minor Service
                                                </div>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
</div>
<modal #leadCreateModal class="modal-top animate animate-slide-in-down extra-large-modal call-view"
    [closeOnOutsideClick]="false" style="max-width: 90vw">
    <ng-template #modalHeader>
        <div style="align-items: center; display: flex">Create Lead</div>
    </ng-template>
    <ng-template #modalBody>
        <app-whatsapp-lead-create (modalEvent)="leadCreateModalClose()"
            [leadDetails]="currentUser.lead_details"></app-whatsapp-lead-create>
    </ng-template>
    <!-- <ng-template #modalFooter>
       <button type="button" (click)="appointmentModalClose()" class="btn btn-outline-danger">DISMISS</button>
   </ng-template> -->
</modal>
<modal #newchat class="modal-top large-modal">
    <ng-template #modalHeader>
        <div class="!py-5">New Message</div>
    </ng-template>
    <ng-template #modalBody>
        <form>
            <div class="mb-3">
                <label for="social_media_source" class="small_label_text m-0 dark:text-white-dark">Social Media
                    Source*</label>
                <ng-select [(ngModel)]="newChatCustomer.country_code" [searchable]="true" [clearable]="false"
                    appendTo="body" placeholder="Choose Country Code" class="custom-multiselect"
                    [ngModelOptions]="{ standalone: true }">
                    <ng-option value="971">+971 (United Arab Emirates)</ng-option>
                    <ng-option value="91">+91 (India)</ng-option>
                    <ng-option value="968">+968 (Oman)</ng-option>
                </ng-select>
            </div>
            <div class="mb-3">
                <label for="social_media_source" class="small_label_text m-0 dark:text-white-dark">Mobile
                    Number*</label>
                <input *ngIf="newChatCustomer.country_code == '971'" id="social_media_source"
                    [(ngModel)]="newChatCustomer.mobile_number" type="text" class="form-input text-sm"
                    [ngModelOptions]="{ standalone: true }" placeholder="Enter without 0" maxlength="9" />
                <input *ngIf="newChatCustomer.country_code != '971'" id="social_media_source"
                    [(ngModel)]="newChatCustomer.mobile_number" type="text" class="form-input text-sm"
                    [ngModelOptions]="{ standalone: true }" placeholder="Enter without 0" maxlength="10" />
            </div>
            <div class="mb-3">
                <label for="social_media_source" class="small_label_text m-0 dark:text-white-dark">Customer Name</label>
                <input id="social_media_source" [(ngModel)]="newChatCustomer.customer_name" type="text"
                    class="form-input text-sm" [ngModelOptions]="{ standalone: true }" maxlength="10" />
            </div>

            <div class="flex flex-row gap-5">
                <div>
                    <label class="inline-flex cursor-pointer">
                        <input type="checkbox" [checked]="normalMessage" [(ngModel)]="normalMessage"
                            name="normal_Message" (change)="checkMessageType(1)" class="form-checkbox"
                            [ngModelOptions]="{ standalone: true }" />
                        <span class="text-white-dark">Normal Mesasge</span>
                    </label>
                </div>
                <div>
                    <label class="inline-flex cursor-pointer">
                        <input type="checkbox" [checked]="campaignMessage" [(ngModel)]="campaignMessage"
                            name="campaign_Message" (change)="checkMessageType(2)" class="form-checkbox"
                            [ngModelOptions]="{ standalone: true }" />
                        <span class="text-white-dark">Campaign Message</span>
                    </label>
                </div>
            </div>
            <div class="mb-3" *ngIf="normalMessage">
                <label for="ctnTextarea">Message</label>
                <textarea id="ctnTextarea" rows="3" class="form-textarea" [(ngModel)]="newChatCustomer.message"
                    [ngModelOptions]="{ standalone: true }" placeholder="Enter Message"></textarea>
            </div>
            <button *ngIf="!isMessage && normalMessage" type="submit" class="btn btn-primary"
                (click)="sendNewMessage(1)">SEND
                MESSAGE</button>
            <button class="mt-3" *ngIf="!isMessage && campaignMessage" type="submit" class="btn btn-primary"
                (click)="sendNewMessage(2)">SEND
                CAMPAIGN MESSAGE</button>
            <button *ngIf="isMessage" type="button" class="btn btn-primary">
                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none"
                    stroke-linecap="round" stroke-linejoin="round"
                    class="inline-block h-5 w-5 shrink-0 animate-[spin_2s_linear_infinite] align-middle ltr:mr-2 rtl:ml-2">
                    <line x1="12" y1="2" x2="12" y2="6"></line>
                    <line x1="12" y1="18" x2="12" y2="22"></line>
                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                    <line x1="2" y1="12" x2="6" y2="12"></line>
                    <line x1="18" y1="12" x2="22" y2="12"></line>
                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                </svg>
                SENDING
            </button>
        </form>
    </ng-template>
    <ng-template #modalFooter> </ng-template>
</modal>
<modal #imageModal class="modal-top extra-large-modal">
    <ng-template #modalHeader>
        <div class="!py-5">Attached Media</div>
    </ng-template>
    <ng-template #modalBody>
        <div style="display: flex; justify-content: center">
            <img [src]="'https://autoversa-media.s3.me-central-1.amazonaws.com/' + previewImage" style="height: 100%" />
        </div>
    </ng-template>
    <ng-template #modalFooter>
        <button type="submit" class="btn btn-danger mr-3" (click)="imageModal.close()">CLOSE</button>
        <button type="submit" class="btn btn-primary" (click)="downloadImage()">DOWNLOAD</button>
    </ng-template>
</modal>

<modal #mediaModal class="modal-top extra-large-modal">
    <ng-template #modalHeader>
        <div class="!py-5">Selected Media</div>
    </ng-template>
    <ng-template #modalBody>
        <div>
            <div *ngIf="selectedMedia.timeExceed"
                class="relative mb-2 flex items-center rounded border border-warning bg-warning-light p-1.5 text-warning ltr:border-l-[64px] rtl:border-r-[64px] dark:bg-warning-dark-light">
                <span class="absolute inset-y-0 m-auto h-6 w-6 text-white ltr:-left-11 rtl:-right-11">
                    <svg width="19" height="19" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3 10.4167C3 7.21907 3 5.62028 3.37752 5.08241C3.75503 4.54454 5.25832 4.02996 8.26491 3.00079L8.83772 2.80472C10.405 2.26824 11.1886 2 12 2C12.8114 2 13.595 2.26824 15.1623 2.80472L15.7351 3.00079C18.7417 4.02996 20.245 4.54454 20.6225 5.08241C21 5.62028 21 7.21907 21 10.4167C21 10.8996 21 11.4234 21 11.9914C21 17.6294 16.761 20.3655 14.1014 21.5273C13.38 21.8424 13.0193 22 12 22C10.9807 22 10.62 21.8424 9.89856 21.5273C7.23896 20.3655 3 17.6294 3 11.9914C3 11.4234 3 10.8996 3 10.4167Z"
                            stroke="currentColor" stroke-width="1.5" />
                        <path d="M12 8V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <circle cx="12" cy="15" r="1" fill="currentColor" />
                    </svg>
                </span>
                <span class="ltr:pr-2 rtl:pl-2"><strong class="ltr:mr-1 rtl:ml-1">Warning!</strong>24 Hours chat window
                    exceeded, start with the following template</span>
            </div>
        </div>
        <div style="display: flex; justify-content: center" *ngIf="selectedMedia.type == 1">
            <img [src]="selectedMedia.media" style="height: 300px" />
        </div>
        <div style="display: flex; justify-content: center" *ngIf="selectedMedia.type == 2">
            <video controls width="450" height="350">
                <source [src]="selectedMedia.media" type="video/mp4" />
                Your browser does not support the video tag.
            </video>
        </div>
        <div>
            <div>
                <label for="ctnTextarea" *ngIf="!selectedMedia.timeExceed">Message</label>
                <label for="ctnTextarea" *ngIf="selectedMedia.timeExceed">Message Template</label>
                <label *ngIf="selectedMedia.timeExceed">Hello! We hope you're doing good,</label>
                <textarea id="ctnTextarea" rows="3" [(ngModel)]="selectedMedia.message" class="form-textarea"
                    placeholder="Enter message"></textarea>
            </div>
        </div>
    </ng-template>
    <ng-template #modalFooter>
        <button class="btn btn-danger mr-3" (click)="mediaModal.close()">CLOSE</button>
        <button *ngIf="!isMessage" class="btn btn-primary" (click)="sendMessageWithMedia()">SEND MESSAGE</button>
        <button *ngIf="isMessage" type="button" class="btn btn-primary">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none"
                stroke-linecap="round" stroke-linejoin="round"
                class="inline-block h-5 w-5 shrink-0 animate-[spin_2s_linear_infinite] align-middle ltr:mr-2 rtl:ml-2">
                <line x1="12" y1="2" x2="12" y2="6"></line>
                <line x1="12" y1="18" x2="12" y2="22"></line>
                <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                <line x1="2" y1="12" x2="6" y2="12"></line>
                <line x1="18" y1="12" x2="22" y2="12"></line>
                <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
            </svg>
            SENDING
        </button>
    </ng-template>
</modal>
<modal #locationmodal class="modal-top small-modal">
    <ng-template #modalHeader>
        <div class="!py-5">Send Location</div>
    </ng-template>
    <ng-template #modalBody style="overflow: hidden">
        <div>
            <!-- square -->
            <button type="button" class="btn btn-primary mb-8 w-full" (click)="sendLocation(1)" [disabled]="isMessage">
                Al Maraghi Automotive Location (Dubai)
            </button>
            <button type="button" class="btn btn-warning w-full" (click)="sendLocation(2)" [disabled]="isMessage">Al
                Maraghi Auto Repairs Location</button>
        </div>
    </ng-template>
</modal>

<modal #labelmodal class="modal-top medium-modal">
    <ng-template #modalHeader>
        <div class="!py-5">Send Location</div>
    </ng-template>
    <ng-template #modalBody style="overflow: hidden">
        <div>
            <!-- square -->
            <div>
                <label class="mb-2 inline-flex items-center">
                    <input type="radio" name="user_status" class="peer form-radio rounded-none text-success"
                        [(ngModel)]="currentUser.wb_cus_category" [value]="'1'" />
                    <span class="peer-checked:text-success">Potential Customer</span>&nbsp;
                    <small class="text-xs not-italic text-[#777]"> (Possibility to convert)</small>
                </label>
            </div>
            <div>
                <label class="mb-2 inline-flex items-center">
                    <input type="radio" name="user_status" class="peer form-radio rounded-none text-warning"
                        [(ngModel)]="currentUser.wb_cus_category" [value]="'2'" />
                    <span class="peer-checked:text-warning">Active Customer</span>&nbsp;
                    <small class="text-xs not-italic text-[#777]">(Vehicle in workshop)</small>
                </label>
            </div>
            <div>
                <label class="mb-2 inline-flex items-center">
                    <input type="radio" name="user_status" class="peer form-radio rounded-none text-info"
                        [(ngModel)]="currentUser.wb_cus_category" [value]="'3'" />
                    <span class="peer-checked:text-info">Appointment Customer</span>&nbsp;
                    <small class="text-xs not-italic text-[#777]"> (Request/Provided Appointments)</small>
                </label>
            </div>
            <div>
                <label class="inline-flex items-center">
                    <input type="radio" name="user_status" class="peer form-radio rounded-none text-danger"
                        [(ngModel)]="currentUser.wb_cus_category" [value]="'4'" />
                    <span class="peer-checked:text-danger">Quotation Customers</span>&nbsp;
                    <small class="text-xs not-italic text-[#777]"> (Request/Provided Quotation)</small>
                </label>
            </div>
            <div>
                <label class="inline-flex items-center">
                    <input type="radio" name="user_status" class="peer form-radio rounded-none text-dark"
                        [(ngModel)]="currentUser.wb_cus_category" [value]="'5'" />
                    <span class="peer-checked:text-dark">Irrelevant Customers</span>&nbsp;
                    <small class="text-xs not-italic text-[#777]"> (No chance of conversion)</small>
                </label>
            </div>
        </div>
    </ng-template>
    <ng-template #modalFooter>
        <button class="btn btn-danger mr-3" (click)="labelmodal.close()">CLOSE</button>
        <button *ngIf="!isMessage" class="btn btn-primary" (click)="updateCustomerCategory()">SAVE</button>
        <button *ngIf="isMessage" type="button" class="btn btn-primary">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none"
                stroke-linecap="round" stroke-linejoin="round"
                class="inline-block h-5 w-5 shrink-0 animate-[spin_2s_linear_infinite] align-middle ltr:mr-2 rtl:ml-2">
                <line x1="12" y1="2" x2="12" y2="6"></line>
                <line x1="12" y1="18" x2="12" y2="22"></line>
                <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                <line x1="2" y1="12" x2="6" y2="12"></line>
                <line x1="18" y1="12" x2="22" y2="12"></line>
                <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
            </svg>
            SAVING
        </button>
    </ng-template>
</modal>

<modal #appointment class="modal-top small-modal">
    <ng-template #modalHeader>
        <div class="!py-5">Schedule Appointment</div>
    </ng-template>
    <ng-template #modalBody style="overflow: hidden">
        <div class="mb-3">
            <label for="social_media_source" class="small_label_text m-0 dark:text-white-dark">Appointment Date</label>
            <input type="date" class="form-input text-sm" maxlength="20" [(ngModel)]="appointmentData.date"
                name="appt_date" />
        </div>
        <div class="mb-3">
            <label for="social_media_source" class="small_label_text m-0 dark:text-white-dark">Appointment Time
                Between</label>
            <div style="display: flex">
                <ng-select [searchable]="true" [clearable]="false" appendTo="body" placeholder="Time Slot"
                    class="custom-multiselect fullWidth" style="width: 100%" [(ngModel)]="appointmentData.timeFrom"
                    name="timeFrom">
                    <ng-option value="07:00 AM">07:00 AM</ng-option>
                    <ng-option value="07:30 AM">07:30 AM</ng-option>
                    <ng-option value="08:00 AM">08:00 AM</ng-option>
                    <ng-option value="08:30 AM">08:30 AM</ng-option>
                    <ng-option value="09:00 AM">09:00 AM</ng-option>
                    <ng-option value="09:30 AM">09:30 AM</ng-option>
                    <ng-option value="10:00 AM">10:00 AM</ng-option>
                    <ng-option value="10:30 AM">10:30 AM</ng-option>
                    <ng-option value="11:00 AM">11:00 AM</ng-option>
                    <ng-option value="11:30 AM">11:30 AM</ng-option>
                    <ng-option value="12:00 PM">12:00 PM</ng-option>
                    <ng-option value="12:30 PM">12:30 PM</ng-option>
                    <ng-option value="01:00 PM">01:00 PM</ng-option>
                    <ng-option value="01:30 PM">01:30 PM</ng-option>
                    <ng-option value="02:00 PM">02:00 PM</ng-option>
                    <ng-option value="02:30 PM">02:30 PM</ng-option>
                    <ng-option value="03:00 PM">03:00 PM</ng-option>
                    <ng-option value="03:30 PM">03:30 PM</ng-option>
                    <ng-option value="04:00 PM">04:00 PM</ng-option>
                    <ng-option value="04:30 PM">04:30 PM</ng-option>
                    <ng-option value="05:00 PM">05:00 PM</ng-option>
                    <ng-option value="05:30 PM">05:30 PM</ng-option>
                    <ng-option value="06:00 PM">06:00 PM</ng-option>
                    <ng-option value="06:30 PM">06:30 PM</ng-option>
                    <ng-option value="07:00 PM">07:00 PM</ng-option>
                    <ng-option value="07:30 PM">07:30 PM</ng-option>
                    <ng-option value="08:00 PM">08:00 PM</ng-option>
                    <ng-option value="08:30 PM">08:30 PM</ng-option>
                    <ng-option value="09:00 PM">09:00 PM</ng-option>
                    <ng-option value="09:30 PM">09:30 PM</ng-option>
                    <ng-option value="10:00 PM">10:00 PM</ng-option>
                    <ng-option value="10:30 PM">10:30 PM</ng-option>
                    <ng-option value="11:00 PM">11:00 PM</ng-option>
                    <ng-option value="11:30 PM">11:30 PM</ng-option>
                    <ng-option value="12:00 AM">12:00 AM</ng-option>
                </ng-select>

                <ng-select [searchable]="true" [clearable]="false" appendTo="body" placeholder="Time Slot"
                    class="custom-multiselect fullWidth" style="width: 100%" [(ngModel)]="appointmentData.timeTo"
                    name="timeTo">
                    <ng-option value="07:00 AM">07:00 AM</ng-option>
                    <ng-option value="07:30 AM">07:30 AM</ng-option>
                    <ng-option value="08:00 AM">08:00 AM</ng-option>
                    <ng-option value="08:30 AM">08:30 AM</ng-option>
                    <ng-option value="09:00 AM">09:00 AM</ng-option>
                    <ng-option value="09:30 AM">09:30 AM</ng-option>
                    <ng-option value="10:00 AM">10:00 AM</ng-option>
                    <ng-option value="10:30 AM">10:30 AM</ng-option>
                    <ng-option value="11:00 AM">11:00 AM</ng-option>
                    <ng-option value="11:30 AM">11:30 AM</ng-option>
                    <ng-option value="12:00 PM">12:00 PM</ng-option>
                    <ng-option value="12:30 PM">12:30 PM</ng-option>
                    <ng-option value="01:00 PM">01:00 PM</ng-option>
                    <ng-option value="01:30 PM">01:30 PM</ng-option>
                    <ng-option value="02:00 PM">02:00 PM</ng-option>
                    <ng-option value="02:30 PM">02:30 PM</ng-option>
                    <ng-option value="03:00 PM">03:00 PM</ng-option>
                    <ng-option value="03:30 PM">03:30 PM</ng-option>
                    <ng-option value="04:00 PM">04:00 PM</ng-option>
                    <ng-option value="04:30 PM">04:30 PM</ng-option>
                    <ng-option value="05:00 PM">05:00 PM</ng-option>
                    <ng-option value="05:30 PM">05:30 PM</ng-option>
                    <ng-option value="06:00 PM">06:00 PM</ng-option>
                    <ng-option value="06:30 PM">06:30 PM</ng-option>
                    <ng-option value="07:00 PM">07:00 PM</ng-option>
                    <ng-option value="07:30 PM">07:30 PM</ng-option>
                    <ng-option value="08:00 PM">08:00 PM</ng-option>
                    <ng-option value="08:30 PM">08:30 PM</ng-option>
                    <ng-option value="09:00 PM">09:00 PM</ng-option>
                    <ng-option value="09:30 PM">09:30 PM</ng-option>
                    <ng-option value="10:00 PM">10:00 PM</ng-option>
                    <ng-option value="10:30 PM">10:30 PM</ng-option>
                    <ng-option value="11:00 PM">11:00 PM</ng-option>
                    <ng-option value="11:30 PM">11:30 PM</ng-option>
                    <ng-option value="12:00 AM">12:00 AM</ng-option>
                </ng-select>
            </div>
        </div>
    </ng-template>
    <ng-template #modalFooter>
        <button class="btn btn-danger mr-3" (click)="appointment.close()">CLOSE</button>
        <button *ngIf="!isMessage" class="btn btn-primary" (click)="sendAppointmentMessage()">SEND MESSAGE</button>
        <button *ngIf="isMessage" type="button" class="btn btn-primary">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none"
                stroke-linecap="round" stroke-linejoin="round"
                class="inline-block h-5 w-5 shrink-0 animate-[spin_2s_linear_infinite] align-middle ltr:mr-2 rtl:ml-2">
                <line x1="12" y1="2" x2="12" y2="6"></line>
                <line x1="12" y1="18" x2="12" y2="22"></line>
                <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                <line x1="2" y1="12" x2="6" y2="12"></line>
                <line x1="18" y1="12" x2="22" y2="12"></line>
                <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
            </svg>
            SENDING
        </button>
    </ng-template>
</modal>

<modal #forward class="modal-top large-modal">
    <ng-template #modalHeader>
        <div class="!py-5">Forward Message</div>
    </ng-template>
    <ng-template #modalBody style="overflow: hidden">
        <div class="!mt-0 flex-grow">
            <ng-container *ngFor="let person of allCustomersList; let i = index">
                <div class="flex items-center">
                    <div class="relative flex-shrink-0">
                        <label class="flex cursor-pointer items-center gap-1">
                            <input type="checkbox" [checked]="isSelected(person)" (change)="toggleSelection(person)"
                                class="form-checkbox" />
                            <img *ngIf="person.wb_cus_profile_pic == ''" [src]="'./assets/images/person_icon.png'"
                                class="h-12 w-12 rounded-full object-cover border_type_{{ person.wb_cus_category }}" />
                            <img *ngIf="person.wb_cus_profile_pic != ''" [src]="'./assets/images/person_icon.png'"
                                class="h-12 w-12 rounded-full object-cover" />
                            <span class="text-white-dark">{{ person.wb_cus_name }}</span>
                        </label>
                    </div>
                </div>
            </ng-container>
        </div>
    </ng-template>
    <ng-template #modalFooter>
        <button class="btn btn-danger mr-3" (click)="forwardModalClose()">CLOSE</button>
        <button *ngIf="!isMessage" class="btn btn-primary" (click)="forwardMessages()">SEND MESSAGE</button>
    </ng-template>
</modal>

<modal #appointmentRemainder class="modal-top small-modal">
    <ng-template #modalHeader>
        <div class="!py-5">Appointment Remainder</div>
    </ng-template>
    <ng-template #modalBody style="overflow: hidden">
        <div class="mb-3">
            <label for="social_media_source" class="small_label_text m-0 dark:text-white-dark">Appointment Date</label>
            <input type="date" class="form-input text-sm" maxlength="20" [(ngModel)]="appointmentRemainderData.date"
                name="appt_date" />
        </div>
        <div class="mb-3">
            <div class="mb-3">
                <label for="social_media_source" class="small_label_text m-0 dark:text-white-dark">Appointment
                    Time</label>
                <ng-select [searchable]="true" [clearable]="false" appendTo="body" placeholder="Time Slot"
                    class="custom-multiselect fullWidth" style="width: 100%" [(ngModel)]="appointmentRemainderData.time"
                    name="timeFrom">
                    <ng-option value="07:00 AM">07:00 AM</ng-option>
                    <ng-option value="07:30 AM">07:30 AM</ng-option>
                    <ng-option value="08:00 AM">08:00 AM</ng-option>
                    <ng-option value="08:30 AM">08:30 AM</ng-option>
                    <ng-option value="09:00 AM">09:00 AM</ng-option>
                    <ng-option value="09:30 AM">09:30 AM</ng-option>
                    <ng-option value="10:00 AM">10:00 AM</ng-option>
                    <ng-option value="10:30 AM">10:30 AM</ng-option>
                    <ng-option value="11:00 AM">11:00 AM</ng-option>
                    <ng-option value="11:30 AM">11:30 AM</ng-option>
                    <ng-option value="12:00 PM">12:00 PM</ng-option>
                    <ng-option value="12:30 PM">12:30 PM</ng-option>
                    <ng-option value="01:00 PM">01:00 PM</ng-option>
                    <ng-option value="01:30 PM">01:30 PM</ng-option>
                    <ng-option value="02:00 PM">02:00 PM</ng-option>
                    <ng-option value="02:30 PM">02:30 PM</ng-option>
                    <ng-option value="03:00 PM">03:00 PM</ng-option>
                    <ng-option value="03:30 PM">03:30 PM</ng-option>
                    <ng-option value="04:00 PM">04:00 PM</ng-option>
                    <ng-option value="04:30 PM">04:30 PM</ng-option>
                    <ng-option value="05:00 PM">05:00 PM</ng-option>
                    <ng-option value="05:30 PM">05:30 PM</ng-option>
                    <ng-option value="06:00 PM">06:00 PM</ng-option>
                    <ng-option value="06:30 PM">06:30 PM</ng-option>
                    <ng-option value="07:00 PM">07:00 PM</ng-option>
                    <ng-option value="07:30 PM">07:30 PM</ng-option>
                    <ng-option value="08:00 PM">08:00 PM</ng-option>
                    <ng-option value="08:30 PM">08:30 PM</ng-option>
                </ng-select>
            </div>
        </div>
    </ng-template>
    <ng-template #modalFooter>
        <button class="btn btn-danger mr-3" (click)="appointmentRemainder.close()">CLOSE</button>
        <button *ngIf="!isMessage" class="btn btn-primary" (click)="sendAppointmentReaminderMessage()">SEND
            MESSAGE</button>
        <button *ngIf="isMessage" type="button" class="btn btn-primary">
            <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none"
                stroke-linecap="round" stroke-linejoin="round"
                class="inline-block h-5 w-5 shrink-0 animate-[spin_2s_linear_infinite] align-middle ltr:mr-2 rtl:ml-2">
                <line x1="12" y1="2" x2="12" y2="6"></line>
                <line x1="12" y1="18" x2="12" y2="22"></line>
                <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                <line x1="2" y1="12" x2="6" y2="12"></line>
                <line x1="18" y1="12" x2="22" y2="12"></line>
                <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
            </svg>
            SENDING
        </button>
    </ng-template>
</modal>