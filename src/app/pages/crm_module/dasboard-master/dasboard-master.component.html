<div *ngIf="showWarning"
    class="relative flex items-center rounded border border-yellow-400 bg-yellow-100 p-2 text-sm text-gray-900">

    <!-- Warning icon -->
    <span class="text-yellow-600 mr-2 h-5 w-5"> ⚠️ </span>

    <!-- Text content -->
    <span class="flex-1">
        <strong class="text-yellow-800">Warning:</strong>
        Price change request{{ requestedprices.length > 1 ? 's' : '' }}
        for <strong>{{ requestedprices.length }}</strong> part{{ requestedprices.length > 1 ? 's' : '' }}
        have been submitted by the Parts Advisor and are awaiting admin approval.
    </span>

    <!-- Clickable icon -->
    <span class="ml-2 cursor-pointer text-yellow-600 hover:text-yellow-800" title="View Requests"
        (click)="goToPriceRequests()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.5 9L11.5 12L8.5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                stroke-linejoin="round" />
            <path d="M12.5 9L15.5 12L12.5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                stroke-linejoin="round" />
            <path
                d="M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8"
                stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
        </svg>
    </span>
</div>


<div *ngIf="us_role_id === '1' || us_role_id === '8' || this.us_role_id === '13'">
    <h5 class="text-lg font-semibold dark:text-white-light" style="text-align: center; padding-bottom: 1rem">Monthly
        Dashboard</h5>
    <div class="mb-5 grid grid-cols-1 gap-4 md:grid-cols-4 md:items-center lg:grid-cols-6" *ngIf="!load_flag">
        <div class="panel"
            style="background: linear-gradient(to right, #092c5a, #4089c1); padding: 0.5rem; color: white">
            <div class="text-md font-semibold">Inbound Calls</div>
            <div class="text-3xl font-bold">{{ arr_sample.length }}</div>
        </div>
        <div class="panel"
            style="background: linear-gradient(to right, #764ba2, #667eea); padding: 0.5rem; color: whitesmoke">
            <div class="text-md font-semibold">Unique Inbound Calls</div>
            <div class="text-3xl font-bold">{{ unique_inbound.length }}</div>
        </div>
        <div class="panel"
            style="background: linear-gradient(to right, #1a2980, #26d0ce); padding: 0.5rem; color: whitesmoke">
            <div class="text-md font-semibold">Marketing Calls</div>
            <div class="text-3xl font-bold">{{ marketing_calls.length }}</div>
        </div>
        <div class="panel"
            style="background: linear-gradient(to right, #314755, #26a0da); padding: 0.5rem; color: whitesmoke">
            <div class="text-md font-semibold">Unique Marketing Calls</div>
            <div class="text-3xl font-bold">{{ totalmarkcount }}</div>
        </div>
        <div class="panel"
            style="background: linear-gradient(to right, #44a08d, #093637); padding: 0.5rem; color: whitesmoke">
            <div class="text-md font-semibold">Lost Customer Converted</div>
            <div class="text-3xl font-bold">{{ lostconvert }}</div>
        </div>
        <div class="panel"
            style="background: linear-gradient(to right, #aa076b, #61045f); padding: 0.5rem; color: whitesmoke">
            <div class="text-md font-semibold">Dissatisfied Closed</div>
            <div class="text-3xl font-bold">{{ dis_count }}/{{ dissatisfied_cust.length }}</div>
        </div>
        <!-- <div class="panel flex"
            style="background: linear-gradient(to right, #11998E , #38EF7D); cursor: pointer"
            >
            <div class="text-md font-semibold">Jobcards Cancelled</div>
            <div class="mt-3 text-3xl font-bold">0</div>
        </div>
        <div class="panel flex"
            style="background: linear-gradient(to right, #748CAB, #748CAB); cursor: pointer"
            >
            <div class="text-md font-semibold">Quotation Rejected </div>
            <div class="mt-3 text-3xl font-bold">0</div>
        </div>
        <div class="panel bg-gradient-to-r from-gray-500 to-gray-400 flex" style="cursor: pointer"
           >
            <div class="text-md font-semibold">Purpose Missing</div>
            <div class="mt-3 text-3xl font-bold">0</div>
        </div> -->
    </div>
    <div class="mb-5 grid grid-cols-1 gap-4 md:grid-cols-4 md:items-center lg:grid-cols-4" *ngIf="!load_flag">
        <div class="panel col-span-2 h-full" *ngIf="leads.length > 0">
            <div class="ng-tns-c35-16 mb-5 flex items-start justify-between">
                <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">Lead Purpose Analysis</h5>
            </div>
            <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart" [labels]="chartOptions.labels"
                [fill]="chartOptions.fill" [dataLabels]="chartOptions.dataLabels" [colors]="chartOptions.colors"
                [responsive]="chartOptions.responsive"></apx-chart>
        </div>
        <div class="panel col-span-2" *ngIf="org_psf_data.extHappy_psf_calls != 0">
            <div class="ng-tns-c35-16 mb-5 flex items-start justify-between">
                <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">PSF Customer Satisfaction</h5>
            </div>
            <apx-chart [series]="radialBarChart.series" [chart]="radialBarChart.chart" [colors]="radialBarChart.colors"
                [grid]="radialBarChart.grid" [plotOptions]="radialBarChart.plotOptions" [labels]="radialBarChart.labels"
                [fill]="radialBarChart.fill" class="rounded-lg bg-white dark:bg-black"></apx-chart>
        </div>
        <div class="panel col-span-2" *ngIf="marketing_chart_flag">
            <div class="ng-tns-c35-16 mb-5 flex items-start justify-between">
                <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">Marketing Dept. Analysis</h5>
            </div>
            <apx-chart [series]="columnChart.series" [chart]="columnChart.chart" [colors]="columnChart.colors"
                [dataLabels]="columnChart.dataLabels" [stroke]="columnChart.stroke"
                [plotOptions]="columnChart.plotOptions" [grid]="columnChart.grid" [xaxis]="columnChart.xaxis"
                [yaxis]="columnChart.yaxis" [tooltip]="columnChart.tooltip"
                class="rounded-lg bg-white dark:bg-black"></apx-chart>
        </div>
        <div class="panel col-span-2" *ngIf="newcust_marketing_chart_flag">
            <div class="ng-tns-c35-16 mb-5 flex items-start justify-between">
                <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">New Customer Marketing Dept.
                    Analysis</h5>
            </div>
            <apx-chart [series]="areaChart.series" [chart]="areaChart.chart" [colors]="areaChart.colors"
                [dataLabels]="areaChart.dataLabels" [stroke]="areaChart.stroke" [xaxis]="areaChart.xaxis"
                [yaxis]="areaChart.yaxis" [labels]="areaChart.labels" [legend]="areaChart.legend"
                [grid]="areaChart.grid" [tooltip]="areaChart.tooltip"
                class="rounded-lg bg-white dark:bg-black"></apx-chart>
        </div>
        <!-- <div class="panel ng-tns-c35-16 h-full sm:col-span-3 xl:col-span-2" *ngIf="customerconverted.length > 0">
            <div class="ng-tns-c35-16 mb-5 flex items-start justify-between">
                <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">Leads Turned To Customer</h5>
            </div>
            <div class="ng-tns-c35-16 flex flex-col space-y-5">
                <div class="ng-tns-c35-16 flex items-center">
                    
                    <div class="ng-tns-c35-16 w-full flex-initial px-3">
                        <div class="w-summary-info ng-tns-c35-16 mb-1 flex justify-between font-semibold text-white-dark">
                            <h6 class="ng-tns-c35-16">Direct Leads</h6>
                            <p class="ng-tns-c35-16 text-xs ltr:ml-auto rtl:mr-auto">{{ directleadpercentage }}</p>
                        </div>
                        <div class="ng-tns-c35-16">
                            <div
                                class="ng-tns-c35-16 h-5 w-full overflow-hidden rounded-full bg-dark-light p-1 shadow-3xl dark:bg-dark-light/10 dark:shadow-none"
                            >
                                <div
                                    class="ng-tns-c35-16 relative h-full w-full rounded-full bg-gradient-to-r from-[#009ffd] to-[#2a2a72] before:absolute before:inset-y-0 before:m-auto before:h-2 before:w-2 before:rounded-full before:bg-white ltr:before:right-0.5 rtl:before:left-0.5"
                                    [ngStyle]="{ width: directleadpercentage }"
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ng-tns-c35-16 flex items-center">
                    <div class="ng-tns-c35-16 w-full flex-initial px-3">
                        <div class="w-summary-info ng-tns-c35-16 mb-1 flex justify-between font-semibold text-white-dark">
                            <h6 class="ng-tns-c35-16">Marketing Leads</h6>
                            <p class="ng-tns-c35-16 text-xs ltr:ml-auto rtl:mr-auto">{{ marketpercentage }}</p>
                        </div>
                        <div class="ng-tns-c35-16">
                            <div
                                class="ng-tns-c35-16 h-5 w-full overflow-hidden rounded-full bg-dark-light p-1 shadow-3xl dark:bg-dark-light/10 dark:shadow-none"
                            >
                                <div
                                    class="ng-tns-c35-16 relative h-full w-full rounded-full bg-gradient-to-r from-[#a71d31] to-[#3f0d12] before:absolute before:inset-y-0 before:m-auto before:h-2 before:w-2 before:rounded-full before:bg-white ltr:before:right-0.5 rtl:before:left-0.5"
                                    [ngStyle]="{ width: marketpercentage }"
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ng-tns-c35-16 flex items-center">
                    <div class="ng-tns-c35-16 w-full flex-initial px-3">
                        <div class="w-summary-info ng-tns-c35-16 mb-1 flex justify-between font-semibold text-white-dark">
                            <h6 class="ng-tns-c35-16">Non Marketing Leads</h6>
                            <p class="ng-tns-c35-16 text-xs ltr:ml-auto rtl:mr-auto">{{ nonmarketpercentage }}</p>
                        </div>
                        <div class="ng-tns-c35-16">
                            <div
                                class="ng-tns-c35-16 h-5 w-full overflow-hidden rounded-full bg-dark-light p-1 shadow-3xl dark:bg-dark-light/10 dark:shadow-none"
                            >
                                <div
                                    class="ng-tns-c35-16 relative h-full w-full rounded-full bg-gradient-to-r from-[#fe5f75] to-[#fc9842] before:absolute before:inset-y-0 before:m-auto before:h-2 before:w-2 before:rounded-full before:bg-white ltr:before:right-0.5 rtl:before:left-0.5"
                                    [ngStyle]="{ width: nonmarketpercentage }"
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel col-span-2" *ngIf="customerdata.length > 0">
            <div class="ng-tns-c35-16 mb-5 flex items-start justify-between">
                <h5 class="ng-tns-c35-16 text-lg font-semibold dark:text-white-light">Customer Conversion</h5>
            </div>
            <apx-chart
                [series]="pieChart.series"
                [chart]="pieChart.chart"
                [labels]="pieChart.labels"
                [colors]="pieChart.colors"
                [responsive]="pieChart.responsive"
                [stroke]="pieChart.stroke"
                [legend]="pieChart.legend"
                class="rounded-lg bg-white dark:bg-black"
            ></apx-chart>
        </div> -->
    </div>
    <div *ngIf="load_flag" style="text-align: center">
        <span
            class="m-auto mb-10 inline-block h-14 w-14 animate-[spin_3s_linear_infinite] rounded-full border-8 border-b-success border-l-primary border-r-warning border-t-danger align-middle"></span>
    </div>
</div>
<div
    *ngIf="us_role_id != '1' && us_role_id != '17' && us_role_id != '11' && this.us_role_id != '13' && this.us_role_id != '8' && this.us_role_id != '20'">
    <app-cre-dash> </app-cre-dash>
</div>
<div *ngIf="us_role_id === '17'">
    <app-spare-dash> </app-spare-dash>
</div>
<div *ngIf="us_role_id === '11'">
    <app-sa-dash> </app-sa-dash>
</div>